{"dependencies":[{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"../../assets/song/AmbianceSonoreBackgroundHome2.mp3","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":69,"column":8,"index":1709},"end":{"line":69,"column":70,"index":1771}}],"key":"oiSlmclAx0ganwHZfHgx6TKd++I=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"../../assets/song/Sons de gameplay.mp3","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":117,"column":8,"index":2908},"end":{"line":117,"column":57,"index":2957}}],"key":"aiDDJ+QybSqcXVZz1TquQcoAmp4=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"../../assets/song/game-over-deep-male-voice-clip-352695.mp3","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":143,"column":8,"index":3557},"end":{"line":143,"column":78,"index":3627}}],"key":"kERGyCI/4l7WI2/6Z6o3kI+DRVk=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AudioController\", {\n    enumerable: true,\n    get: function () {\n      return AudioController;\n    }\n  });\n  var _expoAv = require(_dependencyMap[0], \"expo-av\");\n  let homeSound = null;\n  let gameSound = null;\n  let isHomeLoading = false;\n  let shouldStopHome = false;\n  let activeGameScreens = 0;\n  let isRematchMode = false;\n  const AudioController = {\n    get isRematchMode() {\n      return isRematchMode;\n    },\n    setRematchMode(value) {\n      isRematchMode = value;\n      console.log('Rematch Mode set to:', value);\n    },\n    notifyGameEnter() {\n      activeGameScreens++;\n      isRematchMode = false; // Reset on new game entry\n      console.log('Game Enter: activeGameScreens =', activeGameScreens);\n      this.stopHomeMusic(); // Ensure home music stops when entering a game\n    },\n    notifyGameExit() {\n      if (activeGameScreens > 0) {\n        activeGameScreens--;\n      }\n      if (activeGameScreens === 0) {\n        this.stopGameMusic();\n      }\n      console.log('Game Exit: activeGameScreens =', activeGameScreens);\n    },\n    async playHomeMusic(isMusicEnabled) {\n      // Prevent home music if a game is still active\n      if (activeGameScreens > 0) {\n        console.log('Skipping Home Music: Game(s) still active');\n        return;\n      }\n      if (isRematchMode) {\n        console.log('Skipping Home Music: Rematch in progress');\n        return;\n      }\n      if (!isMusicEnabled) {\n        await this.stopHomeMusic();\n        return;\n      }\n      try {\n        if (homeSound) {\n          const status = await homeSound.getStatusAsync();\n          if (status.isPlaying) return;\n          await homeSound.playAsync();\n          return;\n        }\n\n        // Si déjà en cours de chargement, on ne lance pas une deuxième requête\n        if (isHomeLoading) return;\n        isHomeLoading = true;\n        shouldStopHome = false;\n        const {\n          sound\n        } = await _expoAv.Audio.Sound.createAsync(require(_dependencyMap[1], \"../../assets/song/AmbianceSonoreBackgroundHome2.mp3\"), {\n          isLooping: true,\n          volume: 0.4\n        });\n\n        // Si stopHomeMusic a été appelé pendant le chargement\n        if (shouldStopHome) {\n          await sound.unloadAsync();\n          isHomeLoading = false;\n          return;\n        }\n        homeSound = sound;\n        isHomeLoading = false;\n        await sound.playAsync();\n      } catch (error) {\n        isHomeLoading = false;\n        console.log('Error playing home music', error);\n      }\n    },\n    async stopHomeMusic() {\n      shouldStopHome = true; // Signal d'arrêt pour le chargement en cours\n      if (homeSound) {\n        try {\n          await homeSound.stopAsync();\n          await homeSound.unloadAsync();\n          homeSound = null;\n        } catch (e) {\n          console.log('Error stopping home music', e);\n        }\n      }\n    },\n    async playGameMusic(isMusicEnabled) {\n      if (!isMusicEnabled) {\n        await this.stopGameMusic();\n        return;\n      }\n      try {\n        if (gameSound) {\n          const status = await gameSound.getStatusAsync();\n          if (status.isPlaying) return;\n          await gameSound.playAsync();\n          return;\n        }\n        const {\n          sound\n        } = await _expoAv.Audio.Sound.createAsync(require(_dependencyMap[2], \"../../assets/song/Sons de gameplay.mp3\"), {\n          isLooping: false,\n          volume: 0.5\n        });\n        gameSound = sound;\n        await sound.playAsync();\n      } catch (error) {\n        console.log('Error playing game music', error);\n      }\n    },\n    async stopGameMusic() {\n      if (gameSound) {\n        try {\n          await gameSound.stopAsync();\n          await gameSound.unloadAsync();\n          gameSound = null;\n        } catch (e) {\n          console.log('Error stopping game music', e);\n        }\n      }\n    },\n    async playVictorySound(isSoundEnabled) {\n      if (!isSoundEnabled) return;\n      try {\n        const {\n          sound\n        } = await _expoAv.Audio.Sound.createAsync(require(_dependencyMap[3], \"../../assets/song/game-over-deep-male-voice-clip-352695.mp3\"));\n        await sound.playAsync();\n        sound.setOnPlaybackStatusUpdate(async status => {\n          if (status.didJustFinish) {\n            try {\n              await sound.unloadAsync();\n            } catch (e) {\n              // ignore\n            }\n          }\n        });\n      } catch (error) {\n        console.log('Error playing victory sound', error);\n      }\n    }\n  };\n});","lineCount":158,"map":[[7,2,10,0,"Object"],[7,8,10,0],[7,9,10,0,"defineProperty"],[7,23,10,0],[7,24,10,0,"exports"],[7,31,10,0],[8,4,10,0,"enumerable"],[8,14,10,0],[9,4,10,0,"get"],[9,7,10,0],[9,18,10,0,"get"],[9,19,10,0],[10,6,10,0],[10,13,10,0,"AudioController"],[10,28,10,0],[11,4,10,0],[12,2,10,0],[13,2,1,0],[13,6,1,0,"_expoAv"],[13,13,1,0],[13,16,1,0,"require"],[13,23,1,0],[13,24,1,0,"_dependencyMap"],[13,38,1,0],[14,2,3,0],[14,6,3,4,"homeSound"],[14,15,3,13],[14,18,3,16],[14,22,3,20],[15,2,4,0],[15,6,4,4,"gameSound"],[15,15,4,13],[15,18,4,16],[15,22,4,20],[16,2,5,0],[16,6,5,4,"isHomeLoading"],[16,19,5,17],[16,22,5,20],[16,27,5,25],[17,2,6,0],[17,6,6,4,"shouldStopHome"],[17,20,6,18],[17,23,6,21],[17,28,6,26],[18,2,7,0],[18,6,7,4,"activeGameScreens"],[18,23,7,21],[18,26,7,24],[18,27,7,25],[19,2,8,0],[19,6,8,4,"isRematchMode"],[19,19,8,17],[19,22,8,20],[19,27,8,25],[20,2,10,7],[20,8,10,13,"AudioController"],[20,23,10,28],[20,26,10,31],[21,4,11,2],[21,8,11,6,"isRematchMode"],[21,21,11,19,"isRematchMode"],[21,22,11,19],[21,24,11,22],[22,6,12,4],[22,13,12,11,"isRematchMode"],[22,26,12,24],[23,4,13,2],[23,5,13,3],[24,4,15,2,"setRematchMode"],[24,18,15,16,"setRematchMode"],[24,19,15,17,"value"],[24,24,15,22],[24,26,15,24],[25,6,16,4,"isRematchMode"],[25,19,16,17],[25,22,16,20,"value"],[25,27,16,25],[26,6,17,4,"console"],[26,13,17,11],[26,14,17,12,"log"],[26,17,17,15],[26,18,17,16],[26,40,17,38],[26,42,17,40,"value"],[26,47,17,45],[26,48,17,46],[27,4,18,2],[27,5,18,3],[28,4,20,2,"notifyGameEnter"],[28,19,20,17,"notifyGameEnter"],[28,20,20,17],[28,22,20,20],[29,6,21,4,"activeGameScreens"],[29,23,21,21],[29,25,21,23],[30,6,22,4,"isRematchMode"],[30,19,22,17],[30,22,22,20],[30,27,22,25],[30,28,22,26],[30,29,22,27],[31,6,23,4,"console"],[31,13,23,11],[31,14,23,12,"log"],[31,17,23,15],[31,18,23,16],[31,51,23,49],[31,53,23,51,"activeGameScreens"],[31,70,23,68],[31,71,23,69],[32,6,24,4],[32,10,24,8],[32,11,24,9,"stopHomeMusic"],[32,24,24,22],[32,25,24,23],[32,26,24,24],[32,27,24,25],[32,28,24,26],[33,4,25,2],[33,5,25,3],[34,4,27,2,"notifyGameExit"],[34,18,27,16,"notifyGameExit"],[34,19,27,16],[34,21,27,19],[35,6,28,4],[35,10,28,8,"activeGameScreens"],[35,27,28,25],[35,30,28,28],[35,31,28,29],[35,33,28,31],[36,8,29,6,"activeGameScreens"],[36,25,29,23],[36,27,29,25],[37,6,30,4],[38,6,31,4],[38,10,31,8,"activeGameScreens"],[38,27,31,25],[38,32,31,30],[38,33,31,31],[38,35,31,33],[39,8,32,6],[39,12,32,10],[39,13,32,11,"stopGameMusic"],[39,26,32,24],[39,27,32,25],[39,28,32,26],[40,6,33,4],[41,6,34,4,"console"],[41,13,34,11],[41,14,34,12,"log"],[41,17,34,15],[41,18,34,16],[41,50,34,48],[41,52,34,50,"activeGameScreens"],[41,69,34,67],[41,70,34,68],[42,4,35,2],[42,5,35,3],[43,4,37,2],[43,10,37,8,"playHomeMusic"],[43,23,37,21,"playHomeMusic"],[43,24,37,22,"isMusicEnabled"],[43,38,37,36],[43,40,37,38],[44,6,38,4],[45,6,39,4],[45,10,39,8,"activeGameScreens"],[45,27,39,25],[45,30,39,28],[45,31,39,29],[45,33,39,31],[46,8,40,6,"console"],[46,15,40,13],[46,16,40,14,"log"],[46,19,40,17],[46,20,40,18],[46,63,40,61],[46,64,40,62],[47,8,41,6],[48,6,42,4],[49,6,44,4],[49,10,44,8,"isRematchMode"],[49,23,44,21],[49,25,44,23],[50,8,45,6,"console"],[50,15,45,13],[50,16,45,14,"log"],[50,19,45,17],[50,20,45,18],[50,62,45,60],[50,63,45,61],[51,8,46,6],[52,6,47,4],[53,6,49,4],[53,10,49,8],[53,11,49,9,"isMusicEnabled"],[53,25,49,23],[53,27,49,25],[54,8,50,6],[54,14,50,12],[54,18,50,16],[54,19,50,17,"stopHomeMusic"],[54,32,50,30],[54,33,50,31],[54,34,50,32],[55,8,51,6],[56,6,52,4],[57,6,54,4],[57,10,54,8],[58,8,55,6],[58,12,55,10,"homeSound"],[58,21,55,19],[58,23,55,21],[59,10,56,8],[59,16,56,14,"status"],[59,22,56,20],[59,25,56,23],[59,31,56,29,"homeSound"],[59,40,56,38],[59,41,56,39,"getStatusAsync"],[59,55,56,53],[59,56,56,54],[59,57,56,55],[60,10,57,8],[60,14,57,12,"status"],[60,20,57,18],[60,21,57,19,"isPlaying"],[60,30,57,28],[60,32,57,30],[61,10,58,8],[61,16,58,14,"homeSound"],[61,25,58,23],[61,26,58,24,"playAsync"],[61,35,58,33],[61,36,58,34],[61,37,58,35],[62,10,59,8],[63,8,60,6],[65,8,62,6],[66,8,63,6],[66,12,63,10,"isHomeLoading"],[66,25,63,23],[66,27,63,25],[67,8,65,6,"isHomeLoading"],[67,21,65,19],[67,24,65,22],[67,28,65,26],[68,8,66,6,"shouldStopHome"],[68,22,66,20],[68,25,66,23],[68,30,66,28],[69,8,68,6],[69,14,68,12],[70,10,68,14,"sound"],[71,8,68,20],[71,9,68,21],[71,12,68,24],[71,18,68,30,"Audio"],[71,25,68,35],[71,26,68,35,"Audio"],[71,31,68,35],[71,32,68,36,"Sound"],[71,37,68,41],[71,38,68,42,"createAsync"],[71,49,68,53],[71,50,69,8,"require"],[71,57,69,15],[71,58,69,15,"_dependencyMap"],[71,72,69,15],[71,130,69,69],[71,131,69,70],[71,133,70,8],[72,10,70,10,"isLooping"],[72,19,70,19],[72,21,70,21],[72,25,70,25],[73,10,70,27,"volume"],[73,16,70,33],[73,18,70,35],[74,8,70,39],[74,9,71,6],[74,10,71,7],[76,8,73,6],[77,8,74,6],[77,12,74,10,"shouldStopHome"],[77,26,74,24],[77,28,74,26],[78,10,75,8],[78,16,75,14,"sound"],[78,21,75,19],[78,22,75,20,"unloadAsync"],[78,33,75,31],[78,34,75,32],[78,35,75,33],[79,10,76,8,"isHomeLoading"],[79,23,76,21],[79,26,76,24],[79,31,76,29],[80,10,77,8],[81,8,78,6],[82,8,80,6,"homeSound"],[82,17,80,15],[82,20,80,18,"sound"],[82,25,80,23],[83,8,81,6,"isHomeLoading"],[83,21,81,19],[83,24,81,22],[83,29,81,27],[84,8,82,6],[84,14,82,12,"sound"],[84,19,82,17],[84,20,82,18,"playAsync"],[84,29,82,27],[84,30,82,28],[84,31,82,29],[85,6,83,4],[85,7,83,5],[85,8,83,6],[85,15,83,13,"error"],[85,20,83,18],[85,22,83,20],[86,8,84,6,"isHomeLoading"],[86,21,84,19],[86,24,84,22],[86,29,84,27],[87,8,85,6,"console"],[87,15,85,13],[87,16,85,14,"log"],[87,19,85,17],[87,20,85,18],[87,46,85,44],[87,48,85,46,"error"],[87,53,85,51],[87,54,85,52],[88,6,86,4],[89,4,87,2],[89,5,87,3],[90,4,89,2],[90,10,89,8,"stopHomeMusic"],[90,23,89,21,"stopHomeMusic"],[90,24,89,21],[90,26,89,24],[91,6,90,4,"shouldStopHome"],[91,20,90,18],[91,23,90,21],[91,27,90,25],[91,28,90,26],[91,29,90,27],[92,6,91,4],[92,10,91,8,"homeSound"],[92,19,91,17],[92,21,91,19],[93,8,92,6],[93,12,92,10],[94,10,93,8],[94,16,93,14,"homeSound"],[94,25,93,23],[94,26,93,24,"stopAsync"],[94,35,93,33],[94,36,93,34],[94,37,93,35],[95,10,94,8],[95,16,94,14,"homeSound"],[95,25,94,23],[95,26,94,24,"unloadAsync"],[95,37,94,35],[95,38,94,36],[95,39,94,37],[96,10,95,8,"homeSound"],[96,19,95,17],[96,22,95,20],[96,26,95,24],[97,8,96,6],[97,9,96,7],[97,10,96,8],[97,17,96,15,"e"],[97,18,96,16],[97,20,96,18],[98,10,97,8,"console"],[98,17,97,15],[98,18,97,16,"log"],[98,21,97,19],[98,22,97,20],[98,49,97,47],[98,51,97,49,"e"],[98,52,97,50],[98,53,97,51],[99,8,98,6],[100,6,99,4],[101,4,100,2],[101,5,100,3],[102,4,102,2],[102,10,102,8,"playGameMusic"],[102,23,102,21,"playGameMusic"],[102,24,102,22,"isMusicEnabled"],[102,38,102,36],[102,40,102,38],[103,6,103,4],[103,10,103,8],[103,11,103,9,"isMusicEnabled"],[103,25,103,23],[103,27,103,25],[104,8,104,6],[104,14,104,12],[104,18,104,16],[104,19,104,17,"stopGameMusic"],[104,32,104,30],[104,33,104,31],[104,34,104,32],[105,8,105,6],[106,6,106,4],[107,6,108,4],[107,10,108,8],[108,8,109,6],[108,12,109,10,"gameSound"],[108,21,109,19],[108,23,109,21],[109,10,110,8],[109,16,110,14,"status"],[109,22,110,20],[109,25,110,23],[109,31,110,29,"gameSound"],[109,40,110,38],[109,41,110,39,"getStatusAsync"],[109,55,110,53],[109,56,110,54],[109,57,110,55],[110,10,111,8],[110,14,111,12,"status"],[110,20,111,18],[110,21,111,19,"isPlaying"],[110,30,111,28],[110,32,111,30],[111,10,112,8],[111,16,112,14,"gameSound"],[111,25,112,23],[111,26,112,24,"playAsync"],[111,35,112,33],[111,36,112,34],[111,37,112,35],[112,10,113,8],[113,8,114,6],[114,8,116,6],[114,14,116,12],[115,10,116,14,"sound"],[116,8,116,20],[116,9,116,21],[116,12,116,24],[116,18,116,30,"Audio"],[116,25,116,35],[116,26,116,35,"Audio"],[116,31,116,35],[116,32,116,36,"Sound"],[116,37,116,41],[116,38,116,42,"createAsync"],[116,49,116,53],[116,50,117,8,"require"],[116,57,117,15],[116,58,117,15,"_dependencyMap"],[116,72,117,15],[116,117,117,56],[116,118,117,57],[116,120,118,8],[117,10,118,10,"isLooping"],[117,19,118,19],[117,21,118,21],[117,26,118,26],[118,10,118,28,"volume"],[118,16,118,34],[118,18,118,36],[119,8,118,40],[119,9,119,6],[119,10,119,7],[120,8,120,6,"gameSound"],[120,17,120,15],[120,20,120,18,"sound"],[120,25,120,23],[121,8,121,6],[121,14,121,12,"sound"],[121,19,121,17],[121,20,121,18,"playAsync"],[121,29,121,27],[121,30,121,28],[121,31,121,29],[122,6,122,4],[122,7,122,5],[122,8,122,6],[122,15,122,13,"error"],[122,20,122,18],[122,22,122,20],[123,8,123,6,"console"],[123,15,123,13],[123,16,123,14,"log"],[123,19,123,17],[123,20,123,18],[123,46,123,44],[123,48,123,46,"error"],[123,53,123,51],[123,54,123,52],[124,6,124,4],[125,4,125,2],[125,5,125,3],[126,4,127,2],[126,10,127,8,"stopGameMusic"],[126,23,127,21,"stopGameMusic"],[126,24,127,21],[126,26,127,24],[127,6,128,4],[127,10,128,8,"gameSound"],[127,19,128,17],[127,21,128,19],[128,8,129,6],[128,12,129,10],[129,10,130,8],[129,16,130,14,"gameSound"],[129,25,130,23],[129,26,130,24,"stopAsync"],[129,35,130,33],[129,36,130,34],[129,37,130,35],[130,10,131,8],[130,16,131,14,"gameSound"],[130,25,131,23],[130,26,131,24,"unloadAsync"],[130,37,131,35],[130,38,131,36],[130,39,131,37],[131,10,132,8,"gameSound"],[131,19,132,17],[131,22,132,20],[131,26,132,24],[132,8,133,6],[132,9,133,7],[132,10,133,8],[132,17,133,15,"e"],[132,18,133,16],[132,20,133,18],[133,10,134,8,"console"],[133,17,134,15],[133,18,134,16,"log"],[133,21,134,19],[133,22,134,20],[133,49,134,47],[133,51,134,49,"e"],[133,52,134,50],[133,53,134,51],[134,8,135,6],[135,6,136,4],[136,4,137,2],[136,5,137,3],[137,4,139,2],[137,10,139,8,"playVictorySound"],[137,26,139,24,"playVictorySound"],[137,27,139,25,"isSoundEnabled"],[137,41,139,39],[137,43,139,41],[138,6,140,4],[138,10,140,8],[138,11,140,9,"isSoundEnabled"],[138,25,140,23],[138,27,140,25],[139,6,141,4],[139,10,141,8],[140,8,142,6],[140,14,142,12],[141,10,142,14,"sound"],[142,8,142,20],[142,9,142,21],[142,12,142,24],[142,18,142,30,"Audio"],[142,25,142,35],[142,26,142,35,"Audio"],[142,31,142,35],[142,32,142,36,"Sound"],[142,37,142,41],[142,38,142,42,"createAsync"],[142,49,142,53],[142,50,143,8,"require"],[142,57,143,15],[142,58,143,15,"_dependencyMap"],[142,72,143,15],[142,138,143,77],[142,139,144,6],[142,140,144,7],[143,8,145,6],[143,14,145,12,"sound"],[143,19,145,17],[143,20,145,18,"playAsync"],[143,29,145,27],[143,30,145,28],[143,31,145,29],[144,8,147,6,"sound"],[144,13,147,11],[144,14,147,12,"setOnPlaybackStatusUpdate"],[144,39,147,37],[144,40,147,38],[144,46,147,45,"status"],[144,52,147,51],[144,56,147,56],[145,10,148,8],[145,14,148,12,"status"],[145,20,148,18],[145,21,148,19,"didJustFinish"],[145,34,148,32],[145,36,148,34],[146,12,149,10],[146,16,149,14],[147,14,150,12],[147,20,150,18,"sound"],[147,25,150,23],[147,26,150,24,"unloadAsync"],[147,37,150,35],[147,38,150,36],[147,39,150,37],[148,12,151,10],[148,13,151,11],[148,14,151,12],[148,21,151,19,"e"],[148,22,151,20],[148,24,151,22],[149,14,152,13],[150,12,152,13],[151,10,154,8],[152,8,155,6],[152,9,155,7],[152,10,155,8],[153,6,156,4],[153,7,156,5],[153,8,156,6],[153,15,156,13,"error"],[153,20,156,18],[153,22,156,20],[154,8,157,6,"console"],[154,15,157,13],[154,16,157,14,"log"],[154,19,157,17],[154,20,157,18],[154,49,157,47],[154,51,157,49,"error"],[154,56,157,54],[154,57,157,55],[155,6,158,4],[156,4,159,2],[157,2,160,0],[157,3,160,1],[158,0,160,2],[158,3]],"functionMap":{"names":["<global>","get__isRematchMode","setRematchMode","notifyGameEnter","notifyGameExit","playHomeMusic","stopHomeMusic","playGameMusic","stopGameMusic","playVictorySound","sound.setOnPlaybackStatusUpdate$argument_0"],"mappings":"AAA;ECU;GDE;EEE;GFG;EGE;GHK;EIE;GJQ;EKE;GLkD;EME;GNW;EOE;GPuB;EQE;GRU;ESE;sCCQ;ODQ;GTI"},"hasCjsExports":false},"type":"js/module"}]}