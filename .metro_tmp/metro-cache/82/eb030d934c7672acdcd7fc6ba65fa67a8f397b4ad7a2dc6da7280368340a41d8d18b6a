{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":70},"end":{"line":2,"column":36,"index":106}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"./TransactionService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":54,"index":161}}],"key":"fusp6cV/yhukKnlDL+gnlY4uxyI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[1], \"../config\");\n  var _TransactionService = require(_dependencyMap[2], \"./TransactionService\");\n  var TransactionService = _interopDefault(_TransactionService);\n  class CoinsService {\n    // Clés pour AsyncStorage\n    static STORAGE_KEY_COINS = 'user_coins';\n    static STORAGE_KEY_PENDING_TX = 'pending_transactions';\n\n    /**\n     * Récupère le solde actuel (depuis le serveur ou local)\n     * @param {string} token - Token d'authentification\n     * @returns {Promise<number>} - Solde actuel\n     */\n    static async obtenirSolde(token) {\n      try {\n        // Priorité au serveur\n        if (token) {\n          const response = await fetch(`${_config.API_URL}/users/profile`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (response.ok) {\n            const data = await response.json();\n            await AsyncStorage.default.setItem(this.STORAGE_KEY_COINS, data.coins.toString());\n            return data.coins;\n          }\n        }\n\n        // Fallback local\n        const localCoins = await AsyncStorage.default.getItem(this.STORAGE_KEY_COINS);\n        return localCoins ? parseInt(localCoins, 10) : 0;\n      } catch (error) {\n        console.error('Erreur obtenirSolde:', error);\n        const localCoins = await AsyncStorage.default.getItem(this.STORAGE_KEY_COINS);\n        return localCoins ? parseInt(localCoins, 10) : 0;\n      }\n    }\n\n    /**\n     * Vérifie si le solde est suffisant pour un montant donné\n     * @param {number} soldeActuel \n     * @param {number} montantRequis \n     * @returns {object} { suffisant: boolean, manquant: number }\n     */\n    static verifierSolde(soldeActuel, montantRequis) {\n      if (soldeActuel >= montantRequis) {\n        return {\n          suffisant: true,\n          manquant: 0\n        };\n      }\n      return {\n        suffisant: false,\n        manquant: montantRequis - soldeActuel\n      };\n    }\n\n    /**\n     * Débite des coins (Optimiste + Sauvegarde transaction)\n     * @param {number} soldeActuel \n     * @param {number} montant \n     * @param {string} raison \n     * @param {object} metadata \n     * @returns {Promise<object>} { success, nouveauSolde, transactionId }\n     */\n    static async debiterCoins(soldeActuel, montant, raison, metadata) {\n      const check = this.verifierSolde(soldeActuel, montant);\n      if (!check.suffisant) {\n        throw new Error(`Solde insuffisant. Manque ${check.manquant} coins.`);\n      }\n\n      // Génère un ID unique ou utilise celui fourni pour éviter les doublons\n      // Si metadata.uniqueId est fourni, on l'utilise pour l'idempotence\n      const transactionId = metadata?.uniqueId || `tx_${metadata?.gameId || metadata?.tournamentId || 'gen'}_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`;\n\n      // Vérifie si cette transaction existe déjà (Idempotence)\n      const existing = await TransactionService.default.getTransactionById(transactionId);\n      if (existing) {\n        console.warn('Transaction déjà effectuée, ignorée:', transactionId);\n        return {\n          success: true,\n          nouveauSolde: soldeActuel,\n          transaction: existing,\n          alreadyProcessed: true\n        };\n      }\n      const nouveauSolde = soldeActuel - montant;\n\n      // Créer la transaction\n      const transaction = {\n        id: transactionId,\n        type: 'DEBIT',\n        montant,\n        raison,\n        metadata,\n        soldeAvant: soldeActuel,\n        soldeApres: nouveauSolde,\n        timestamp: Date.now(),\n        statut: 'EN_COURS',\n        synchronise: false\n      };\n\n      // Sauvegarder localement\n      await TransactionService.default.ajouterTransaction(transaction);\n      await AsyncStorage.default.setItem(this.STORAGE_KEY_COINS, nouveauSolde.toString());\n      return {\n        success: true,\n        nouveauSolde,\n        transaction\n      };\n    }\n\n    /**\n     * Réconciliation en cas de désynchronisation\n     * @param {string} userId \n     * @param {string} token \n     */\n    static async reconcileBalance(userId, token) {\n      try {\n        // 1. Récupère le solde serveur\n        const response = await fetch(`${_config.API_URL}/users/balance`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) return null;\n        const data = await response.json();\n        const serverBalance = data.coins;\n\n        // 2. Récupère le solde local\n        const localCoins = await AsyncStorage.default.getItem(this.STORAGE_KEY_COINS);\n        const localBalance = localCoins ? parseInt(localCoins, 10) : 0;\n\n        // 3. Si différence, utilise le serveur comme source de vérité\n        if (serverBalance !== localBalance) {\n          console.warn('Désynchronisation détectée', {\n            serverBalance,\n            localBalance\n          });\n          await AsyncStorage.default.setItem(this.STORAGE_KEY_COINS, serverBalance.toString());\n          return serverBalance;\n        }\n        return localBalance;\n      } catch (error) {\n        console.error('Erreur reconciliation:', error);\n        return null;\n      }\n    }\n\n    /**\n     * Crédite des coins\n     * @param {number} soldeActuel \n     * @param {number} montant \n     * @param {string} raison \n     * @param {object} metadata \n     * @returns {Promise<object>} { success, nouveauSolde, transactionId }\n     */\n    static async crediterCoins(soldeActuel, montant, raison, metadata) {\n      // Idempotence: Génère un ID unique ou utilise celui fourni\n      const transactionId = metadata?.uniqueId || `tx_${metadata?.gameId || metadata?.tournamentId || 'gen'}_credit_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`;\n\n      // Vérifie si cette transaction existe déjà\n      const existing = await TransactionService.default.getTransactionById(transactionId);\n      if (existing) {\n        console.warn('Transaction (crédit) déjà effectuée, ignorée:', transactionId);\n        return {\n          success: true,\n          nouveauSolde: soldeActuel,\n          transaction: existing,\n          alreadyProcessed: true\n        };\n      }\n      const nouveauSolde = soldeActuel + montant;\n      const transaction = {\n        id: transactionId,\n        type: 'CREDIT',\n        montant,\n        raison,\n        metadata,\n        soldeAvant: soldeActuel,\n        soldeApres: nouveauSolde,\n        timestamp: Date.now(),\n        statut: 'COMPLETEE',\n        // Les crédits sont généralement finaux (gains)\n        synchronise: false\n      };\n      await TransactionService.default.ajouterTransaction(transaction);\n      await AsyncStorage.default.setItem(this.STORAGE_KEY_COINS, nouveauSolde.toString());\n      return {\n        success: true,\n        nouveauSolde,\n        transaction\n      };\n    }\n\n    /**\n     * Rembourse une transaction (ex: match nul ou annulé)\n     * @param {number} soldeActuel \n     * @param {number} montant \n     * @param {string} raison \n     * @param {object} metadata \n     * @returns {Promise<object>} { success, nouveauSolde, transactionId }\n     */\n    static async rembourserTransaction(soldeActuel, montant, raison, metadata) {\n      // Idempotence\n      const transactionId = metadata?.uniqueId || `tx_${metadata?.gameId || metadata?.tournamentId || 'gen'}_refund_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`;\n      const existing = await TransactionService.default.getTransactionById(transactionId);\n      if (existing) {\n        console.warn('Transaction (remboursement) déjà effectuée, ignorée:', transactionId);\n        return {\n          success: true,\n          nouveauSolde: soldeActuel,\n          transaction: existing,\n          alreadyProcessed: true\n        };\n      }\n      const nouveauSolde = soldeActuel + montant;\n      const transaction = {\n        id: transactionId,\n        type: 'REMBOURSEMENT',\n        montant,\n        raison,\n        metadata,\n        soldeAvant: soldeActuel,\n        soldeApres: nouveauSolde,\n        timestamp: Date.now(),\n        statut: 'COMPLETEE',\n        synchronise: false\n      };\n      await TransactionService.default.ajouterTransaction(transaction);\n      await AsyncStorage.default.setItem(this.STORAGE_KEY_COINS, nouveauSolde.toString());\n      return {\n        success: true,\n        nouveauSolde,\n        transaction\n      };\n    }\n\n    /**\n     * Calcule les gains nets après commission\n     * @param {number} montantPari \n     * @param {number} pourcentageGains (ex: 0.9 pour 90%)\n     * @returns {object} { gainsNet, commission, total }\n     */\n    static calculerGains(montantPari, pourcentageGains = 0.9) {\n      const potTotal = montantPari * 2;\n      const gainsNet = Math.floor(potTotal * pourcentageGains);\n      const commission = potTotal - gainsNet;\n      return {\n        gainsNet,\n        commission,\n        potTotal\n      };\n    }\n\n    /**\n     * Synchronise les transactions locales avec le serveur\n     * @param {string} token \n     */\n    static async synchroniser(token) {\n      if (!token) return {\n        ok: false,\n        status: 0\n      };\n      try {\n        const pending = await TransactionService.default.getPendingTransactions();\n        if (pending.length === 0) return {\n          ok: true,\n          skipped: true\n        };\n        const response = await fetch(`${_config.API_URL}/transactions/sync`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            transactions: pending\n          })\n        });\n        if (response.ok) {\n          const data = await response.json();\n          const syncedIds = pending.map(t => t.id);\n          await TransactionService.default.markAsSynced(syncedIds);\n          if (data.serverBalance !== undefined) {\n            await AsyncStorage.default.setItem(this.STORAGE_KEY_COINS, data.serverBalance.toString());\n            return {\n              ok: true,\n              serverBalance: data.serverBalance\n            };\n          }\n          return {\n            ok: true\n          };\n        } else {\n          console.error('Erreur sync serveur:', response.status);\n          return {\n            ok: false,\n            status: response.status\n          };\n        }\n      } catch (error) {\n        console.error('Erreur synchronisation:', error);\n        return {\n          ok: false,\n          status: 0\n        };\n      }\n    }\n  }\n  var _default = CoinsService;\n});","lineCount":332,"map":[[12,2,267,0,"Object"],[12,8,267,0],[12,9,267,0,"defineProperty"],[12,23,267,0],[12,24,267,0,"exports"],[12,31,267,0],[13,4,267,0,"enumerable"],[13,14,267,0],[14,4,267,0,"get"],[14,7,267,0],[14,18,267,0,"get"],[14,19,267,0],[15,6,267,0],[15,13,267,0,"_default"],[15,21,267,0],[16,4,267,0],[17,2,267,0],[18,2,1,0],[18,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,1,0],[18,45,1,0,"require"],[18,52,1,0],[18,53,1,0,"_dependencyMap"],[18,67,1,0],[19,2,1,0],[19,6,1,0,"AsyncStorage"],[19,18,1,0],[19,21,1,0,"_interopDefault"],[19,36,1,0],[19,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,1,0],[20,2,2,0],[20,6,2,0,"_config"],[20,13,2,0],[20,16,2,0,"require"],[20,23,2,0],[20,24,2,0,"_dependencyMap"],[20,38,2,0],[21,2,3,0],[21,6,3,0,"_TransactionService"],[21,25,3,0],[21,28,3,0,"require"],[21,35,3,0],[21,36,3,0,"_dependencyMap"],[21,50,3,0],[22,2,3,0],[22,6,3,0,"TransactionService"],[22,24,3,0],[22,27,3,0,"_interopDefault"],[22,42,3,0],[22,43,3,0,"_TransactionService"],[22,62,3,0],[23,2,5,0],[23,8,5,6,"CoinsService"],[23,20,5,18],[23,21,5,19],[24,4,6,4],[25,4,7,4],[25,11,7,11,"STORAGE_KEY_COINS"],[25,28,7,28],[25,31,7,31],[25,43,7,43],[26,4,8,4],[26,11,8,11,"STORAGE_KEY_PENDING_TX"],[26,33,8,33],[26,36,8,36],[26,58,8,58],[28,4,10,4],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,4,15,4],[33,17,15,17,"obtenirSolde"],[33,29,15,29,"obtenirSolde"],[33,30,15,30,"token"],[33,35,15,35],[33,37,15,37],[34,6,16,8],[34,10,16,12],[35,8,17,12],[36,8,18,12],[36,12,18,16,"token"],[36,17,18,21],[36,19,18,23],[37,10,19,16],[37,16,19,22,"response"],[37,24,19,30],[37,27,19,33],[37,33,19,39,"fetch"],[37,38,19,44],[37,39,19,45],[37,42,19,48,"API_URL"],[37,49,19,55],[37,50,19,55,"API_URL"],[37,57,19,55],[37,73,19,71],[37,75,19,73],[38,12,20,20,"headers"],[38,19,20,27],[38,21,20,29],[39,14,20,31,"Authorization"],[39,27,20,44],[39,29,20,46],[39,39,20,56,"token"],[39,44,20,61],[40,12,20,64],[41,10,21,16],[41,11,21,17],[41,12,21,18],[42,10,22,16],[42,14,22,20,"response"],[42,22,22,28],[42,23,22,29,"ok"],[42,25,22,31],[42,27,22,33],[43,12,23,20],[43,18,23,26,"data"],[43,22,23,30],[43,25,23,33],[43,31,23,39,"response"],[43,39,23,47],[43,40,23,48,"json"],[43,44,23,52],[43,45,23,53],[43,46,23,54],[44,12,24,20],[44,18,24,26,"AsyncStorage"],[44,30,24,38],[44,31,24,38,"default"],[44,38,24,38],[44,39,24,39,"setItem"],[44,46,24,46],[44,47,24,47],[44,51,24,51],[44,52,24,52,"STORAGE_KEY_COINS"],[44,69,24,69],[44,71,24,71,"data"],[44,75,24,75],[44,76,24,76,"coins"],[44,81,24,81],[44,82,24,82,"toString"],[44,90,24,90],[44,91,24,91],[44,92,24,92],[44,93,24,93],[45,12,25,20],[45,19,25,27,"data"],[45,23,25,31],[45,24,25,32,"coins"],[45,29,25,37],[46,10,26,16],[47,8,27,12],[49,8,29,12],[50,8,30,12],[50,14,30,18,"localCoins"],[50,24,30,28],[50,27,30,31],[50,33,30,37,"AsyncStorage"],[50,45,30,49],[50,46,30,49,"default"],[50,53,30,49],[50,54,30,50,"getItem"],[50,61,30,57],[50,62,30,58],[50,66,30,62],[50,67,30,63,"STORAGE_KEY_COINS"],[50,84,30,80],[50,85,30,81],[51,8,31,12],[51,15,31,19,"localCoins"],[51,25,31,29],[51,28,31,32,"parseInt"],[51,36,31,40],[51,37,31,41,"localCoins"],[51,47,31,51],[51,49,31,53],[51,51,31,55],[51,52,31,56],[51,55,31,59],[51,56,31,60],[52,6,32,8],[52,7,32,9],[52,8,32,10],[52,15,32,17,"error"],[52,20,32,22],[52,22,32,24],[53,8,33,12,"console"],[53,15,33,19],[53,16,33,20,"error"],[53,21,33,25],[53,22,33,26],[53,44,33,48],[53,46,33,50,"error"],[53,51,33,55],[53,52,33,56],[54,8,34,12],[54,14,34,18,"localCoins"],[54,24,34,28],[54,27,34,31],[54,33,34,37,"AsyncStorage"],[54,45,34,49],[54,46,34,49,"default"],[54,53,34,49],[54,54,34,50,"getItem"],[54,61,34,57],[54,62,34,58],[54,66,34,62],[54,67,34,63,"STORAGE_KEY_COINS"],[54,84,34,80],[54,85,34,81],[55,8,35,12],[55,15,35,19,"localCoins"],[55,25,35,29],[55,28,35,32,"parseInt"],[55,36,35,40],[55,37,35,41,"localCoins"],[55,47,35,51],[55,49,35,53],[55,51,35,55],[55,52,35,56],[55,55,35,59],[55,56,35,60],[56,6,36,8],[57,4,37,4],[59,4,39,4],[60,0,40,0],[61,0,41,0],[62,0,42,0],[63,0,43,0],[64,0,44,0],[65,4,45,4],[65,11,45,11,"verifierSolde"],[65,24,45,24,"verifierSolde"],[65,25,45,25,"soldeActuel"],[65,36,45,36],[65,38,45,38,"montantRequis"],[65,51,45,51],[65,53,45,53],[66,6,46,8],[66,10,46,12,"soldeActuel"],[66,21,46,23],[66,25,46,27,"montantRequis"],[66,38,46,40],[66,40,46,42],[67,8,47,12],[67,15,47,19],[68,10,47,21,"suffisant"],[68,19,47,30],[68,21,47,32],[68,25,47,36],[69,10,47,38,"manquant"],[69,18,47,46],[69,20,47,48],[70,8,47,50],[70,9,47,51],[71,6,48,8],[72,6,49,8],[72,13,49,15],[73,8,49,17,"suffisant"],[73,17,49,26],[73,19,49,28],[73,24,49,33],[74,8,49,35,"manquant"],[74,16,49,43],[74,18,49,45,"montantRequis"],[74,31,49,58],[74,34,49,61,"soldeActuel"],[75,6,49,73],[75,7,49,74],[76,4,50,4],[78,4,52,4],[79,0,53,0],[80,0,54,0],[81,0,55,0],[82,0,56,0],[83,0,57,0],[84,0,58,0],[85,0,59,0],[86,4,60,4],[86,17,60,17,"debiterCoins"],[86,29,60,29,"debiterCoins"],[86,30,60,30,"soldeActuel"],[86,41,60,41],[86,43,60,43,"montant"],[86,50,60,50],[86,52,60,52,"raison"],[86,58,60,58],[86,60,60,60,"metadata"],[86,68,60,68],[86,70,60,70],[87,6,61,8],[87,12,61,14,"check"],[87,17,61,19],[87,20,61,22],[87,24,61,26],[87,25,61,27,"verifierSolde"],[87,38,61,40],[87,39,61,41,"soldeActuel"],[87,50,61,52],[87,52,61,54,"montant"],[87,59,61,61],[87,60,61,62],[88,6,62,8],[88,10,62,12],[88,11,62,13,"check"],[88,16,62,18],[88,17,62,19,"suffisant"],[88,26,62,28],[88,28,62,30],[89,8,63,12],[89,14,63,18],[89,18,63,22,"Error"],[89,23,63,27],[89,24,63,28],[89,53,63,57,"check"],[89,58,63,62],[89,59,63,63,"manquant"],[89,67,63,71],[89,76,63,80],[89,77,63,81],[90,6,64,8],[92,6,66,8],[93,6,67,8],[94,6,68,8],[94,12,68,14,"transactionId"],[94,25,68,27],[94,28,68,30,"metadata"],[94,36,68,38],[94,38,68,40,"uniqueId"],[94,46,68,48],[94,50,68,52],[94,56,68,58,"metadata"],[94,64,68,66],[94,66,68,68,"gameId"],[94,72,68,74],[94,76,68,78,"metadata"],[94,84,68,86],[94,86,68,88,"tournamentId"],[94,98,68,100],[94,102,68,104],[94,107,68,109],[94,111,68,113,"Date"],[94,115,68,117],[94,116,68,118,"now"],[94,119,68,121],[94,120,68,122],[94,121,68,123],[94,125,68,127,"Math"],[94,129,68,131],[94,130,68,132,"random"],[94,136,68,138],[94,137,68,139],[94,138,68,140],[94,139,68,141,"toString"],[94,147,68,149],[94,148,68,150],[94,150,68,152],[94,151,68,153],[94,152,68,154,"substr"],[94,158,68,160],[94,159,68,161],[94,160,68,162],[94,162,68,164],[94,163,68,165],[94,164,68,166],[94,166,68,168],[96,6,70,8],[97,6,71,8],[97,12,71,14,"existing"],[97,20,71,22],[97,23,71,25],[97,29,71,31,"TransactionService"],[97,47,71,49],[97,48,71,49,"default"],[97,55,71,49],[97,56,71,50,"getTransactionById"],[97,74,71,68],[97,75,71,69,"transactionId"],[97,88,71,82],[97,89,71,83],[98,6,72,8],[98,10,72,12,"existing"],[98,18,72,20],[98,20,72,22],[99,8,73,12,"console"],[99,15,73,19],[99,16,73,20,"warn"],[99,20,73,24],[99,21,73,25],[99,59,73,63],[99,61,73,65,"transactionId"],[99,74,73,78],[99,75,73,79],[100,8,74,12],[100,15,74,19],[101,10,74,21,"success"],[101,17,74,28],[101,19,74,30],[101,23,74,34],[102,10,74,36,"nouveauSolde"],[102,22,74,48],[102,24,74,50,"soldeActuel"],[102,35,74,61],[103,10,74,63,"transaction"],[103,21,74,74],[103,23,74,76,"existing"],[103,31,74,84],[104,10,74,86,"alreadyProcessed"],[104,26,74,102],[104,28,74,104],[105,8,74,109],[105,9,74,110],[106,6,75,8],[107,6,77,8],[107,12,77,14,"nouveauSolde"],[107,24,77,26],[107,27,77,29,"soldeActuel"],[107,38,77,40],[107,41,77,43,"montant"],[107,48,77,50],[109,6,79,8],[110,6,80,8],[110,12,80,14,"transaction"],[110,23,80,25],[110,26,80,28],[111,8,81,12,"id"],[111,10,81,14],[111,12,81,16,"transactionId"],[111,25,81,29],[112,8,82,12,"type"],[112,12,82,16],[112,14,82,18],[112,21,82,25],[113,8,83,12,"montant"],[113,15,83,19],[114,8,84,12,"raison"],[114,14,84,18],[115,8,85,12,"metadata"],[115,16,85,20],[116,8,86,12,"soldeAvant"],[116,18,86,22],[116,20,86,24,"soldeActuel"],[116,31,86,35],[117,8,87,12,"soldeApres"],[117,18,87,22],[117,20,87,24,"nouveauSolde"],[117,32,87,36],[118,8,88,12,"timestamp"],[118,17,88,21],[118,19,88,23,"Date"],[118,23,88,27],[118,24,88,28,"now"],[118,27,88,31],[118,28,88,32],[118,29,88,33],[119,8,89,12,"statut"],[119,14,89,18],[119,16,89,20],[119,26,89,30],[120,8,90,12,"synchronise"],[120,19,90,23],[120,21,90,25],[121,6,91,8],[121,7,91,9],[123,6,93,8],[124,6,94,8],[124,12,94,14,"TransactionService"],[124,30,94,32],[124,31,94,32,"default"],[124,38,94,32],[124,39,94,33,"ajouterTransaction"],[124,57,94,51],[124,58,94,52,"transaction"],[124,69,94,63],[124,70,94,64],[125,6,95,8],[125,12,95,14,"AsyncStorage"],[125,24,95,26],[125,25,95,26,"default"],[125,32,95,26],[125,33,95,27,"setItem"],[125,40,95,34],[125,41,95,35],[125,45,95,39],[125,46,95,40,"STORAGE_KEY_COINS"],[125,63,95,57],[125,65,95,59,"nouveauSolde"],[125,77,95,71],[125,78,95,72,"toString"],[125,86,95,80],[125,87,95,81],[125,88,95,82],[125,89,95,83],[126,6,97,8],[126,13,97,15],[127,8,97,17,"success"],[127,15,97,24],[127,17,97,26],[127,21,97,30],[128,8,97,32,"nouveauSolde"],[128,20,97,44],[129,8,97,46,"transaction"],[130,6,97,58],[130,7,97,59],[131,4,98,4],[133,4,100,4],[134,0,101,0],[135,0,102,0],[136,0,103,0],[137,0,104,0],[138,4,105,4],[138,17,105,17,"reconcileBalance"],[138,33,105,33,"reconcileBalance"],[138,34,105,34,"userId"],[138,40,105,40],[138,42,105,42,"token"],[138,47,105,47],[138,49,105,49],[139,6,106,8],[139,10,106,12],[140,8,107,12],[141,8,108,12],[141,14,108,18,"response"],[141,22,108,26],[141,25,108,29],[141,31,108,35,"fetch"],[141,36,108,40],[141,37,108,41],[141,40,108,44,"API_URL"],[141,47,108,51],[141,48,108,51,"API_URL"],[141,55,108,51],[141,71,108,67],[141,73,108,69],[142,10,109,16,"headers"],[142,17,109,23],[142,19,109,25],[143,12,109,27,"Authorization"],[143,25,109,40],[143,27,109,42],[143,37,109,52,"token"],[143,42,109,57],[144,10,109,60],[145,8,110,12],[145,9,110,13],[145,10,110,14],[146,8,112,12],[146,12,112,16],[146,13,112,17,"response"],[146,21,112,25],[146,22,112,26,"ok"],[146,24,112,28],[146,26,112,30],[146,33,112,37],[146,37,112,41],[147,8,114,12],[147,14,114,18,"data"],[147,18,114,22],[147,21,114,25],[147,27,114,31,"response"],[147,35,114,39],[147,36,114,40,"json"],[147,40,114,44],[147,41,114,45],[147,42,114,46],[148,8,115,12],[148,14,115,18,"serverBalance"],[148,27,115,31],[148,30,115,34,"data"],[148,34,115,38],[148,35,115,39,"coins"],[148,40,115,44],[150,8,117,12],[151,8,118,12],[151,14,118,18,"localCoins"],[151,24,118,28],[151,27,118,31],[151,33,118,37,"AsyncStorage"],[151,45,118,49],[151,46,118,49,"default"],[151,53,118,49],[151,54,118,50,"getItem"],[151,61,118,57],[151,62,118,58],[151,66,118,62],[151,67,118,63,"STORAGE_KEY_COINS"],[151,84,118,80],[151,85,118,81],[152,8,119,12],[152,14,119,18,"localBalance"],[152,26,119,30],[152,29,119,33,"localCoins"],[152,39,119,43],[152,42,119,46,"parseInt"],[152,50,119,54],[152,51,119,55,"localCoins"],[152,61,119,65],[152,63,119,67],[152,65,119,69],[152,66,119,70],[152,69,119,73],[152,70,119,74],[154,8,121,12],[155,8,122,12],[155,12,122,16,"serverBalance"],[155,25,122,29],[155,30,122,34,"localBalance"],[155,42,122,46],[155,44,122,48],[156,10,123,16,"console"],[156,17,123,23],[156,18,123,24,"warn"],[156,22,123,28],[156,23,123,29],[156,51,123,57],[156,53,123,59],[157,12,123,61,"serverBalance"],[157,25,123,74],[158,12,123,76,"localBalance"],[159,10,123,89],[159,11,123,90],[159,12,123,91],[160,10,124,16],[160,16,124,22,"AsyncStorage"],[160,28,124,34],[160,29,124,34,"default"],[160,36,124,34],[160,37,124,35,"setItem"],[160,44,124,42],[160,45,124,43],[160,49,124,47],[160,50,124,48,"STORAGE_KEY_COINS"],[160,67,124,65],[160,69,124,67,"serverBalance"],[160,82,124,80],[160,83,124,81,"toString"],[160,91,124,89],[160,92,124,90],[160,93,124,91],[160,94,124,92],[161,10,125,16],[161,17,125,23,"serverBalance"],[161,30,125,36],[162,8,126,12],[163,8,128,12],[163,15,128,19,"localBalance"],[163,27,128,31],[164,6,129,8],[164,7,129,9],[164,8,129,10],[164,15,129,17,"error"],[164,20,129,22],[164,22,129,24],[165,8,130,12,"console"],[165,15,130,19],[165,16,130,20,"error"],[165,21,130,25],[165,22,130,26],[165,46,130,50],[165,48,130,52,"error"],[165,53,130,57],[165,54,130,58],[166,8,131,12],[166,15,131,19],[166,19,131,23],[167,6,132,8],[168,4,133,4],[170,4,135,4],[171,0,136,0],[172,0,137,0],[173,0,138,0],[174,0,139,0],[175,0,140,0],[176,0,141,0],[177,0,142,0],[178,4,143,4],[178,17,143,17,"crediterCoins"],[178,30,143,30,"crediterCoins"],[178,31,143,31,"soldeActuel"],[178,42,143,42],[178,44,143,44,"montant"],[178,51,143,51],[178,53,143,53,"raison"],[178,59,143,59],[178,61,143,61,"metadata"],[178,69,143,69],[178,71,143,71],[179,6,144,8],[180,6,145,8],[180,12,145,14,"transactionId"],[180,25,145,27],[180,28,145,30,"metadata"],[180,36,145,38],[180,38,145,40,"uniqueId"],[180,46,145,48],[180,50,145,52],[180,56,145,58,"metadata"],[180,64,145,66],[180,66,145,68,"gameId"],[180,72,145,74],[180,76,145,78,"metadata"],[180,84,145,86],[180,86,145,88,"tournamentId"],[180,98,145,100],[180,102,145,104],[180,107,145,109],[180,118,145,120,"Date"],[180,122,145,124],[180,123,145,125,"now"],[180,126,145,128],[180,127,145,129],[180,128,145,130],[180,132,145,134,"Math"],[180,136,145,138],[180,137,145,139,"random"],[180,143,145,145],[180,144,145,146],[180,145,145,147],[180,146,145,148,"toString"],[180,154,145,156],[180,155,145,157],[180,157,145,159],[180,158,145,160],[180,159,145,161,"substr"],[180,165,145,167],[180,166,145,168],[180,167,145,169],[180,169,145,171],[180,170,145,172],[180,171,145,173],[180,173,145,175],[182,6,147,8],[183,6,148,8],[183,12,148,14,"existing"],[183,20,148,22],[183,23,148,25],[183,29,148,31,"TransactionService"],[183,47,148,49],[183,48,148,49,"default"],[183,55,148,49],[183,56,148,50,"getTransactionById"],[183,74,148,68],[183,75,148,69,"transactionId"],[183,88,148,82],[183,89,148,83],[184,6,149,8],[184,10,149,12,"existing"],[184,18,149,20],[184,20,149,22],[185,8,150,12,"console"],[185,15,150,19],[185,16,150,20,"warn"],[185,20,150,24],[185,21,150,25],[185,68,150,72],[185,70,150,74,"transactionId"],[185,83,150,87],[185,84,150,88],[186,8,151,12],[186,15,151,19],[187,10,151,21,"success"],[187,17,151,28],[187,19,151,30],[187,23,151,34],[188,10,151,36,"nouveauSolde"],[188,22,151,48],[188,24,151,50,"soldeActuel"],[188,35,151,61],[189,10,151,63,"transaction"],[189,21,151,74],[189,23,151,76,"existing"],[189,31,151,84],[190,10,151,86,"alreadyProcessed"],[190,26,151,102],[190,28,151,104],[191,8,151,109],[191,9,151,110],[192,6,152,8],[193,6,154,8],[193,12,154,14,"nouveauSolde"],[193,24,154,26],[193,27,154,29,"soldeActuel"],[193,38,154,40],[193,41,154,43,"montant"],[193,48,154,50],[194,6,156,8],[194,12,156,14,"transaction"],[194,23,156,25],[194,26,156,28],[195,8,157,12,"id"],[195,10,157,14],[195,12,157,16,"transactionId"],[195,25,157,29],[196,8,158,12,"type"],[196,12,158,16],[196,14,158,18],[196,22,158,26],[197,8,159,12,"montant"],[197,15,159,19],[198,8,160,12,"raison"],[198,14,160,18],[199,8,161,12,"metadata"],[199,16,161,20],[200,8,162,12,"soldeAvant"],[200,18,162,22],[200,20,162,24,"soldeActuel"],[200,31,162,35],[201,8,163,12,"soldeApres"],[201,18,163,22],[201,20,163,24,"nouveauSolde"],[201,32,163,36],[202,8,164,12,"timestamp"],[202,17,164,21],[202,19,164,23,"Date"],[202,23,164,27],[202,24,164,28,"now"],[202,27,164,31],[202,28,164,32],[202,29,164,33],[203,8,165,12,"statut"],[203,14,165,18],[203,16,165,20],[203,27,165,31],[204,8,165,33],[205,8,166,12,"synchronise"],[205,19,166,23],[205,21,166,25],[206,6,167,8],[206,7,167,9],[207,6,169,8],[207,12,169,14,"TransactionService"],[207,30,169,32],[207,31,169,32,"default"],[207,38,169,32],[207,39,169,33,"ajouterTransaction"],[207,57,169,51],[207,58,169,52,"transaction"],[207,69,169,63],[207,70,169,64],[208,6,170,8],[208,12,170,14,"AsyncStorage"],[208,24,170,26],[208,25,170,26,"default"],[208,32,170,26],[208,33,170,27,"setItem"],[208,40,170,34],[208,41,170,35],[208,45,170,39],[208,46,170,40,"STORAGE_KEY_COINS"],[208,63,170,57],[208,65,170,59,"nouveauSolde"],[208,77,170,71],[208,78,170,72,"toString"],[208,86,170,80],[208,87,170,81],[208,88,170,82],[208,89,170,83],[209,6,172,8],[209,13,172,15],[210,8,172,17,"success"],[210,15,172,24],[210,17,172,26],[210,21,172,30],[211,8,172,32,"nouveauSolde"],[211,20,172,44],[212,8,172,46,"transaction"],[213,6,172,58],[213,7,172,59],[214,4,173,4],[216,4,175,4],[217,0,176,0],[218,0,177,0],[219,0,178,0],[220,0,179,0],[221,0,180,0],[222,0,181,0],[223,0,182,0],[224,4,183,4],[224,17,183,17,"rembourserTransaction"],[224,38,183,38,"rembourserTransaction"],[224,39,183,39,"soldeActuel"],[224,50,183,50],[224,52,183,52,"montant"],[224,59,183,59],[224,61,183,61,"raison"],[224,67,183,67],[224,69,183,69,"metadata"],[224,77,183,77],[224,79,183,79],[225,6,184,8],[226,6,185,8],[226,12,185,14,"transactionId"],[226,25,185,27],[226,28,185,30,"metadata"],[226,36,185,38],[226,38,185,40,"uniqueId"],[226,46,185,48],[226,50,185,52],[226,56,185,58,"metadata"],[226,64,185,66],[226,66,185,68,"gameId"],[226,72,185,74],[226,76,185,78,"metadata"],[226,84,185,86],[226,86,185,88,"tournamentId"],[226,98,185,100],[226,102,185,104],[226,107,185,109],[226,118,185,120,"Date"],[226,122,185,124],[226,123,185,125,"now"],[226,126,185,128],[226,127,185,129],[226,128,185,130],[226,132,185,134,"Math"],[226,136,185,138],[226,137,185,139,"random"],[226,143,185,145],[226,144,185,146],[226,145,185,147],[226,146,185,148,"toString"],[226,154,185,156],[226,155,185,157],[226,157,185,159],[226,158,185,160],[226,159,185,161,"substr"],[226,165,185,167],[226,166,185,168],[226,167,185,169],[226,169,185,171],[226,170,185,172],[226,171,185,173],[226,173,185,175],[227,6,187,8],[227,12,187,14,"existing"],[227,20,187,22],[227,23,187,25],[227,29,187,31,"TransactionService"],[227,47,187,49],[227,48,187,49,"default"],[227,55,187,49],[227,56,187,50,"getTransactionById"],[227,74,187,68],[227,75,187,69,"transactionId"],[227,88,187,82],[227,89,187,83],[228,6,188,8],[228,10,188,12,"existing"],[228,18,188,20],[228,20,188,22],[229,8,189,13,"console"],[229,15,189,20],[229,16,189,21,"warn"],[229,20,189,25],[229,21,189,26],[229,75,189,80],[229,77,189,82,"transactionId"],[229,90,189,95],[229,91,189,96],[230,8,190,13],[230,15,190,20],[231,10,190,22,"success"],[231,17,190,29],[231,19,190,31],[231,23,190,35],[232,10,190,37,"nouveauSolde"],[232,22,190,49],[232,24,190,51,"soldeActuel"],[232,35,190,62],[233,10,190,64,"transaction"],[233,21,190,75],[233,23,190,77,"existing"],[233,31,190,85],[234,10,190,87,"alreadyProcessed"],[234,26,190,103],[234,28,190,105],[235,8,190,110],[235,9,190,111],[236,6,191,8],[237,6,193,8],[237,12,193,14,"nouveauSolde"],[237,24,193,26],[237,27,193,29,"soldeActuel"],[237,38,193,40],[237,41,193,43,"montant"],[237,48,193,50],[238,6,195,8],[238,12,195,14,"transaction"],[238,23,195,25],[238,26,195,28],[239,8,196,12,"id"],[239,10,196,14],[239,12,196,16,"transactionId"],[239,25,196,29],[240,8,197,12,"type"],[240,12,197,16],[240,14,197,18],[240,29,197,33],[241,8,198,12,"montant"],[241,15,198,19],[242,8,199,12,"raison"],[242,14,199,18],[243,8,200,12,"metadata"],[243,16,200,20],[244,8,201,12,"soldeAvant"],[244,18,201,22],[244,20,201,24,"soldeActuel"],[244,31,201,35],[245,8,202,12,"soldeApres"],[245,18,202,22],[245,20,202,24,"nouveauSolde"],[245,32,202,36],[246,8,203,12,"timestamp"],[246,17,203,21],[246,19,203,23,"Date"],[246,23,203,27],[246,24,203,28,"now"],[246,27,203,31],[246,28,203,32],[246,29,203,33],[247,8,204,12,"statut"],[247,14,204,18],[247,16,204,20],[247,27,204,31],[248,8,205,12,"synchronise"],[248,19,205,23],[248,21,205,25],[249,6,206,8],[249,7,206,9],[250,6,208,8],[250,12,208,14,"TransactionService"],[250,30,208,32],[250,31,208,32,"default"],[250,38,208,32],[250,39,208,33,"ajouterTransaction"],[250,57,208,51],[250,58,208,52,"transaction"],[250,69,208,63],[250,70,208,64],[251,6,209,8],[251,12,209,14,"AsyncStorage"],[251,24,209,26],[251,25,209,26,"default"],[251,32,209,26],[251,33,209,27,"setItem"],[251,40,209,34],[251,41,209,35],[251,45,209,39],[251,46,209,40,"STORAGE_KEY_COINS"],[251,63,209,57],[251,65,209,59,"nouveauSolde"],[251,77,209,71],[251,78,209,72,"toString"],[251,86,209,80],[251,87,209,81],[251,88,209,82],[251,89,209,83],[252,6,211,8],[252,13,211,15],[253,8,211,17,"success"],[253,15,211,24],[253,17,211,26],[253,21,211,30],[254,8,211,32,"nouveauSolde"],[254,20,211,44],[255,8,211,46,"transaction"],[256,6,211,58],[256,7,211,59],[257,4,212,4],[259,4,214,4],[260,0,215,0],[261,0,216,0],[262,0,217,0],[263,0,218,0],[264,0,219,0],[265,4,220,4],[265,11,220,11,"calculerGains"],[265,24,220,24,"calculerGains"],[265,25,220,25,"montantPari"],[265,36,220,36],[265,38,220,38,"pourcentageGains"],[265,54,220,54],[265,57,220,57],[265,60,220,60],[265,62,220,62],[266,6,221,8],[266,12,221,14,"potTotal"],[266,20,221,22],[266,23,221,25,"montantPari"],[266,34,221,36],[266,37,221,39],[266,38,221,40],[267,6,222,8],[267,12,222,14,"gainsNet"],[267,20,222,22],[267,23,222,25,"Math"],[267,27,222,29],[267,28,222,30,"floor"],[267,33,222,35],[267,34,222,36,"potTotal"],[267,42,222,44],[267,45,222,47,"pourcentageGains"],[267,61,222,63],[267,62,222,64],[268,6,223,8],[268,12,223,14,"commission"],[268,22,223,24],[268,25,223,27,"potTotal"],[268,33,223,35],[268,36,223,38,"gainsNet"],[268,44,223,46],[269,6,224,8],[269,13,224,15],[270,8,224,17,"gainsNet"],[270,16,224,25],[271,8,224,27,"commission"],[271,18,224,37],[272,8,224,39,"potTotal"],[273,6,224,48],[273,7,224,49],[274,4,225,4],[276,4,227,4],[277,0,228,0],[278,0,229,0],[279,0,230,0],[280,4,231,4],[280,17,231,17,"synchroniser"],[280,29,231,29,"synchroniser"],[280,30,231,30,"token"],[280,35,231,35],[280,37,231,37],[281,6,232,8],[281,10,232,12],[281,11,232,13,"token"],[281,16,232,18],[281,18,232,20],[281,25,232,27],[282,8,232,29,"ok"],[282,10,232,31],[282,12,232,33],[282,17,232,38],[283,8,232,40,"status"],[283,14,232,46],[283,16,232,48],[284,6,232,50],[284,7,232,51],[285,6,234,8],[285,10,234,12],[286,8,235,12],[286,14,235,18,"pending"],[286,21,235,25],[286,24,235,28],[286,30,235,34,"TransactionService"],[286,48,235,52],[286,49,235,52,"default"],[286,56,235,52],[286,57,235,53,"getPendingTransactions"],[286,79,235,75],[286,80,235,76],[286,81,235,77],[287,8,236,12],[287,12,236,16,"pending"],[287,19,236,23],[287,20,236,24,"length"],[287,26,236,30],[287,31,236,35],[287,32,236,36],[287,34,236,38],[287,41,236,45],[288,10,236,47,"ok"],[288,12,236,49],[288,14,236,51],[288,18,236,55],[289,10,236,57,"skipped"],[289,17,236,64],[289,19,236,66],[290,8,236,71],[290,9,236,72],[291,8,238,12],[291,14,238,18,"response"],[291,22,238,26],[291,25,238,29],[291,31,238,35,"fetch"],[291,36,238,40],[291,37,238,41],[291,40,238,44,"API_URL"],[291,47,238,51],[291,48,238,51,"API_URL"],[291,55,238,51],[291,75,238,71],[291,77,238,73],[292,10,239,16,"method"],[292,16,239,22],[292,18,239,24],[292,24,239,30],[293,10,240,16,"headers"],[293,17,240,23],[293,19,240,25],[294,12,241,20],[294,26,241,34],[294,28,241,36],[294,46,241,54],[295,12,242,20],[295,27,242,35],[295,29,242,37],[295,39,242,47,"token"],[295,44,242,52],[296,10,243,16],[296,11,243,17],[297,10,244,16,"body"],[297,14,244,20],[297,16,244,22,"JSON"],[297,20,244,26],[297,21,244,27,"stringify"],[297,30,244,36],[297,31,244,37],[298,12,244,39,"transactions"],[298,24,244,51],[298,26,244,53,"pending"],[299,10,244,61],[299,11,244,62],[300,8,245,12],[300,9,245,13],[300,10,245,14],[301,8,247,12],[301,12,247,16,"response"],[301,20,247,24],[301,21,247,25,"ok"],[301,23,247,27],[301,25,247,29],[302,10,248,16],[302,16,248,22,"data"],[302,20,248,26],[302,23,248,29],[302,29,248,35,"response"],[302,37,248,43],[302,38,248,44,"json"],[302,42,248,48],[302,43,248,49],[302,44,248,50],[303,10,249,16],[303,16,249,22,"syncedIds"],[303,25,249,31],[303,28,249,34,"pending"],[303,35,249,41],[303,36,249,42,"map"],[303,39,249,45],[303,40,249,46,"t"],[303,41,249,47],[303,45,249,51,"t"],[303,46,249,52],[303,47,249,53,"id"],[303,49,249,55],[303,50,249,56],[304,10,250,16],[304,16,250,22,"TransactionService"],[304,34,250,40],[304,35,250,40,"default"],[304,42,250,40],[304,43,250,41,"markAsSynced"],[304,55,250,53],[304,56,250,54,"syncedIds"],[304,65,250,63],[304,66,250,64],[305,10,251,16],[305,14,251,20,"data"],[305,18,251,24],[305,19,251,25,"serverBalance"],[305,32,251,38],[305,37,251,43,"undefined"],[305,46,251,52],[305,48,251,54],[306,12,252,20],[306,18,252,26,"AsyncStorage"],[306,30,252,38],[306,31,252,38,"default"],[306,38,252,38],[306,39,252,39,"setItem"],[306,46,252,46],[306,47,252,47],[306,51,252,51],[306,52,252,52,"STORAGE_KEY_COINS"],[306,69,252,69],[306,71,252,71,"data"],[306,75,252,75],[306,76,252,76,"serverBalance"],[306,89,252,89],[306,90,252,90,"toString"],[306,98,252,98],[306,99,252,99],[306,100,252,100],[306,101,252,101],[307,12,253,20],[307,19,253,27],[308,14,253,29,"ok"],[308,16,253,31],[308,18,253,33],[308,22,253,37],[309,14,253,39,"serverBalance"],[309,27,253,52],[309,29,253,54,"data"],[309,33,253,58],[309,34,253,59,"serverBalance"],[310,12,253,73],[310,13,253,74],[311,10,254,16],[312,10,255,16],[312,17,255,23],[313,12,255,25,"ok"],[313,14,255,27],[313,16,255,29],[314,10,255,34],[314,11,255,35],[315,8,256,12],[315,9,256,13],[315,15,256,19],[316,10,257,16,"console"],[316,17,257,23],[316,18,257,24,"error"],[316,23,257,29],[316,24,257,30],[316,46,257,52],[316,48,257,54,"response"],[316,56,257,62],[316,57,257,63,"status"],[316,63,257,69],[316,64,257,70],[317,10,258,16],[317,17,258,23],[318,12,258,25,"ok"],[318,14,258,27],[318,16,258,29],[318,21,258,34],[319,12,258,36,"status"],[319,18,258,42],[319,20,258,44,"response"],[319,28,258,52],[319,29,258,53,"status"],[320,10,258,60],[320,11,258,61],[321,8,259,12],[322,6,260,8],[322,7,260,9],[322,8,260,10],[322,15,260,17,"error"],[322,20,260,22],[322,22,260,24],[323,8,261,12,"console"],[323,15,261,19],[323,16,261,20,"error"],[323,21,261,25],[323,22,261,26],[323,47,261,51],[323,49,261,53,"error"],[323,54,261,58],[323,55,261,59],[324,8,262,12],[324,15,262,19],[325,10,262,21,"ok"],[325,12,262,23],[325,14,262,25],[325,19,262,30],[326,10,262,32,"status"],[326,16,262,38],[326,18,262,40],[327,8,262,42],[327,9,262,43],[328,6,263,8],[329,4,264,4],[330,2,265,0],[331,2,267,0],[331,6,267,0,"_default"],[331,14,267,0],[331,17,267,15,"CoinsService"],[331,29,267,27],[332,0,267,28],[332,3]],"functionMap":{"names":["<global>","CoinsService","obtenirSolde","verifierSolde","debiterCoins","reconcileBalance","crediterCoins","rembourserTransaction","calculerGains","synchroniser","pending.map$argument_0"],"mappings":"AAA;ACI;ICU;KDsB;IEQ;KFK;IGU;KHsC;IIO;KJ4B;IKU;KL8B;IMU;KN6B;IOQ;KPK;IQM;8CCkB,SD;KRe;CDC"},"hasCjsExports":false},"type":"js/module"}]}