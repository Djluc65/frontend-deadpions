{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/AppState","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JfCM6WRyn2619+pzBJhEHd1+SSw=","exportNames":["*"],"imports":1}},{"name":"react-redux","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":190},"end":{"line":4,"column":55,"index":245}}],"key":"kZ4/idPhugyPFHafSDEx3FuasdM=","exportNames":["*"],"imports":1}},{"name":"../redux/slices/authSlice","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":246},"end":{"line":5,"column":74,"index":320}}],"key":"c389LJVpwerJveUdWrEfcLzKsL8=","exportNames":["*"],"imports":1}},{"name":"../services/CoinsService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":321},"end":{"line":6,"column":52,"index":373}}],"key":"ODT/1vlz65MS9b0BlGtAqQl2Gm4=","exportNames":["*"],"imports":1}},{"name":"../utils/socket","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":374},"end":{"line":7,"column":41,"index":415}}],"key":"7BqdzLkbpjCxzQ9f1JdghPEfeac=","exportNames":["*"],"imports":1}},{"name":"../components/CoinsFeedback","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":416},"end":{"line":8,"column":56,"index":472}}],"key":"63Os0rY/yY2a6weknN+vdqMN/1o=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":473},"end":{"line":9,"column":36,"index":509}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Volumes/BACK UP/DeadPions/DeadPions/frontend-deadpions/src/context/CoinsContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"CoinsProvider\", {\n    enumerable: true,\n    get: function () {\n      return CoinsProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useCoinsContext\", {\n    enumerable: true,\n    get: function () {\n      return useCoinsContext;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsAppState = require(_dependencyMap[2], \"react-native-web/dist/exports/AppState\");\n  var AppState = _interopDefault(_reactNativeWebDistExportsAppState);\n  var _reactRedux = require(_dependencyMap[3], \"react-redux\");\n  var _reduxSlicesAuthSlice = require(_dependencyMap[4], \"../redux/slices/authSlice\");\n  var _servicesCoinsService = require(_dependencyMap[5], \"../services/CoinsService\");\n  var CoinsService = _interopDefault(_servicesCoinsService);\n  var _utilsSocket = require(_dependencyMap[6], \"../utils/socket\");\n  var _componentsCoinsFeedback = require(_dependencyMap[7], \"../components/CoinsFeedback\");\n  var CoinsFeedback = _interopDefault(_componentsCoinsFeedback);\n  var _config = require(_dependencyMap[8], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[9], \"react/jsx-dev-runtime\");\n  const CoinsContext = /*#__PURE__*/(0, _react.createContext)(null);\n  const CoinsProvider = ({\n    children\n  }) => {\n    _s();\n    const dispatch = (0, _reactRedux.useDispatch)();\n    const {\n      user,\n      token,\n      refreshToken\n    } = (0, _reactRedux.useSelector)(state => state.auth);\n    const [isSyncing, setIsSyncing] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const [lastSync, setLastSync] = (0, _react.useState)(null);\n    const [feedback, setFeedback] = (0, _react.useState)({\n      visible: false,\n      amount: 0\n    });\n\n    // Initialisation et écouteurs\n    (0, _react.useEffect)(() => {\n      if (token) {\n        syncBalance();\n\n        // Écouter les mises à jour de solde en temps réel\n        _utilsSocket.socket.on('balance_updated', handleBalanceUpdate);\n      }\n      const subscription = AppState.default.addEventListener('change', nextAppState => {\n        if (nextAppState === 'active' && token) {\n          syncBalance();\n        }\n      });\n      return () => {\n        _utilsSocket.socket.off('balance_updated', handleBalanceUpdate);\n        subscription.remove();\n      };\n    }, [token]);\n\n    // Persister le solde Redux dans AsyncStorage pour qu'il soit disponible au redémarrage\n    // même avant la première requête réseau\n    (0, _react.useEffect)(() => {\n      if (user && typeof user.coins === 'number') {\n        const saveCoins = async () => {\n          try {\n            await AsyncStorage.default.setItem('user_coins', user.coins.toString());\n          } catch (error) {\n            console.error('Erreur sauvegarde coins local:', error);\n          }\n        };\n        saveCoins();\n      }\n    }, [user?.coins]);\n    const handleBalanceUpdate = data => {\n      console.log('Balance updated via socket:', data);\n      if (data && typeof data.coins === 'number') {\n        dispatch((0, _reduxSlicesAuthSlice.updateUser)({\n          coins: data.coins\n        }));\n      }\n    };\n    const syncBalance = async () => {\n      if (!token) return;\n      setIsLoading(true);\n      try {\n        // 1. D'abord synchroniser les transactions locales en attente (Push)\n        // Cela permet de mettre à jour le serveur avec nos gains/pertes locaux\n        await syncTransactions();\n\n        // 2. Ensuite, récupérer la vérité terrain du serveur (Pull)\n        // Cela assure que nous avons le solde final (incluant ce qu'on vient de pousser + d'autres changements)\n        const balance = await CoinsService.default.reconcileBalance(user?.id, token);\n        if (balance !== null && user && user.coins !== balance) {\n          dispatch((0, _reduxSlicesAuthSlice.updateUser)({\n            coins: balance\n          }));\n        }\n        setLastSync(Date.now());\n      } catch (error) {\n        console.error('Erreur syncBalance:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    // Alias pour compatibilité\n    const refreshBalance = syncBalance;\n    const syncTransactions = async () => {\n      if (!token || isSyncing) return;\n      try {\n        setIsSyncing(true);\n        const res = await CoinsService.default.synchroniser(token);\n        if (res && res.ok === false && res.status === 401 && refreshToken) {\n          try {\n            const refreshResponse = await fetch(`${_config.API_URL}/auth/refresh-token`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                refreshToken\n              })\n            });\n            if (refreshResponse.ok) {\n              const data = await refreshResponse.json();\n              dispatch((0, _reduxSlicesAuthSlice.updateAccessToken)(data.token));\n              await CoinsService.default.synchroniser(data.token);\n            }\n          } catch (e) {\n            console.error('Erreur refresh token:', e);\n          }\n        }\n      } catch (error) {\n        console.error('Erreur syncTransactions:', error);\n      } finally {\n        setIsSyncing(false);\n      }\n    };\n    const debit = async (amount, reason, metadata) => {\n      const currentBalance = user?.coins || 0;\n      try {\n        const result = await CoinsService.default.debiterCoins(currentBalance, amount, reason, metadata);\n        // Mise à jour immédiate Redux (Optimiste)\n        dispatch((0, _reduxSlicesAuthSlice.updateUser)({\n          coins: result.nouveauSolde\n        }));\n\n        // Feedback visuel\n        setFeedback({\n          visible: true,\n          amount: -amount\n        });\n\n        // Si en ligne, on pourrait vouloir notifier le serveur immédiatement\n        // Mais CoinsService.debiterCoins gère le stockage local et la sync se fera via le service\n        syncTransactions();\n        return result;\n      } catch (error) {\n        console.error('Erreur debit context:', error);\n        throw error;\n      }\n    };\n    const credit = async (amount, reason, metadata) => {\n      const currentBalance = user?.coins || 0;\n      try {\n        const result = await CoinsService.default.crediterCoins(currentBalance, amount, reason, metadata);\n        dispatch((0, _reduxSlicesAuthSlice.updateUser)({\n          coins: result.nouveauSolde\n        }));\n\n        // Feedback visuel\n        setFeedback({\n          visible: true,\n          amount: amount,\n          type: 'CREDIT'\n        });\n        syncTransactions();\n        return result;\n      } catch (error) {\n        console.error('Erreur credit context:', error);\n        throw error;\n      }\n    };\n    const refund = async (amount, reason, metadata) => {\n      const currentBalance = user?.coins || 0;\n      try {\n        const result = await CoinsService.default.rembourserTransaction(currentBalance, amount, reason, metadata);\n        dispatch((0, _reduxSlicesAuthSlice.updateUser)({\n          coins: result.nouveauSolde\n        }));\n\n        // Feedback visuel\n        setFeedback({\n          visible: true,\n          amount: amount,\n          type: 'REMBOURSEMENT'\n        });\n        syncTransactions();\n        return result;\n      } catch (error) {\n        console.error('Erreur refund context:', error);\n        throw error;\n      }\n    };\n    const value = {\n      refreshBalance,\n      syncBalance,\n      // Nouvelle fonction exportée\n      debit,\n      credit,\n      refund,\n      isSyncing,\n      isLoading,\n      lastSync,\n      feedback,\n      setFeedback // Pour pouvoir fermer le feedback manuellement\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(CoinsContext.Provider, {\n      value: value,\n      children: [children, /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(CoinsFeedback.default, {\n        visible: feedback.visible,\n        amount: feedback.amount,\n        type: feedback.type,\n        onFinish: () => setFeedback(prev => ({\n          ...prev,\n          visible: false\n        }))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this);\n  };\n  _s(CoinsProvider, \"EQIPGWtRq761GZeZb0T4tlvio50=\", false, function () {\n    return [_reactRedux.useDispatch, _reactRedux.useSelector];\n  });\n  _c = CoinsProvider;\n  const useCoinsContext = () => {\n    _s2();\n    const context = (0, _react.useContext)(CoinsContext);\n    if (!context) {\n      throw new Error('useCoinsContext must be used within a CoinsProvider');\n    }\n    return context;\n  };\n  _s2(useCoinsContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _default = CoinsContext;\n  var _c;\n  $RefreshReg$(_c, \"CoinsProvider\");\n});","lineCount":280,"map":[[15,2,207,0,"Object"],[15,8,207,0],[15,9,207,0,"defineProperty"],[15,23,207,0],[15,24,207,0,"exports"],[15,31,207,0],[16,4,207,0,"enumerable"],[16,14,207,0],[17,4,207,0,"get"],[17,7,207,0],[17,18,207,0,"get"],[17,19,207,0],[18,6,207,0],[18,13,207,0,"_default"],[18,21,207,0],[19,4,207,0],[20,2,207,0],[21,2,13,0,"Object"],[21,8,13,0],[21,9,13,0,"defineProperty"],[21,23,13,0],[21,24,13,0,"exports"],[21,31,13,0],[22,4,13,0,"enumerable"],[22,14,13,0],[23,4,13,0,"get"],[23,7,13,0],[23,18,13,0,"get"],[23,19,13,0],[24,6,13,0],[24,13,13,0,"CoinsProvider"],[24,26,13,0],[25,4,13,0],[26,2,13,0],[27,2,199,0,"Object"],[27,8,199,0],[27,9,199,0,"defineProperty"],[27,23,199,0],[27,24,199,0,"exports"],[27,31,199,0],[28,4,199,0,"enumerable"],[28,14,199,0],[29,4,199,0,"get"],[29,7,199,0],[29,18,199,0,"get"],[29,19,199,0],[30,6,199,0],[30,13,199,0,"useCoinsContext"],[30,28,199,0],[31,4,199,0],[32,2,199,0],[33,2,1,0],[33,6,1,0,"_react"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,2,0],[34,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[34,42,2,0],[34,45,2,0,"require"],[34,52,2,0],[34,53,2,0,"_dependencyMap"],[34,67,2,0],[35,2,2,0],[35,6,2,0,"AsyncStorage"],[35,18,2,0],[35,21,2,0,"_interopDefault"],[35,36,2,0],[35,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[35,73,2,0],[36,2,2,69],[36,6,2,69,"_reactNativeWebDistExportsAppState"],[36,40,2,69],[36,43,2,69,"require"],[36,50,2,69],[36,51,2,69,"_dependencyMap"],[36,65,2,69],[37,2,2,69],[37,6,2,69,"AppState"],[37,14,2,69],[37,17,2,69,"_interopDefault"],[37,32,2,69],[37,33,2,69,"_reactNativeWebDistExportsAppState"],[37,67,2,69],[38,2,4,0],[38,6,4,0,"_reactRedux"],[38,17,4,0],[38,20,4,0,"require"],[38,27,4,0],[38,28,4,0,"_dependencyMap"],[38,42,4,0],[39,2,5,0],[39,6,5,0,"_reduxSlicesAuthSlice"],[39,27,5,0],[39,30,5,0,"require"],[39,37,5,0],[39,38,5,0,"_dependencyMap"],[39,52,5,0],[40,2,6,0],[40,6,6,0,"_servicesCoinsService"],[40,27,6,0],[40,30,6,0,"require"],[40,37,6,0],[40,38,6,0,"_dependencyMap"],[40,52,6,0],[41,2,6,0],[41,6,6,0,"CoinsService"],[41,18,6,0],[41,21,6,0,"_interopDefault"],[41,36,6,0],[41,37,6,0,"_servicesCoinsService"],[41,58,6,0],[42,2,7,0],[42,6,7,0,"_utilsSocket"],[42,18,7,0],[42,21,7,0,"require"],[42,28,7,0],[42,29,7,0,"_dependencyMap"],[42,43,7,0],[43,2,8,0],[43,6,8,0,"_componentsCoinsFeedback"],[43,30,8,0],[43,33,8,0,"require"],[43,40,8,0],[43,41,8,0,"_dependencyMap"],[43,55,8,0],[44,2,8,0],[44,6,8,0,"CoinsFeedback"],[44,19,8,0],[44,22,8,0,"_interopDefault"],[44,37,8,0],[44,38,8,0,"_componentsCoinsFeedback"],[44,62,8,0],[45,2,9,0],[45,6,9,0,"_config"],[45,13,9,0],[45,16,9,0,"require"],[45,23,9,0],[45,24,9,0,"_dependencyMap"],[45,38,9,0],[46,2,9,36],[46,6,9,36,"_reactJsxDevRuntime"],[46,25,9,36],[46,28,9,36,"require"],[46,35,9,36],[46,36,9,36,"_dependencyMap"],[46,50,9,36],[47,2,11,0],[47,8,11,6,"CoinsContext"],[47,20,11,18],[47,36,11,21],[47,40,11,21,"createContext"],[47,46,11,34],[47,47,11,34,"createContext"],[47,60,11,34],[47,62,11,35],[47,66,11,39],[47,67,11,40],[48,2,13,7],[48,8,13,13,"CoinsProvider"],[48,21,13,26],[48,24,13,29,"CoinsProvider"],[48,25,13,30],[49,4,13,32,"children"],[50,2,13,41],[50,3,13,42],[50,8,13,47],[51,4,13,47,"_s"],[51,6,13,47],[52,4,14,4],[52,10,14,10,"dispatch"],[52,18,14,18],[52,21,14,21],[52,25,14,21,"useDispatch"],[52,36,14,32],[52,37,14,32,"useDispatch"],[52,48,14,32],[52,50,14,33],[52,51,14,34],[53,4,15,4],[53,10,15,10],[54,6,15,12,"user"],[54,10,15,16],[55,6,15,18,"token"],[55,11,15,23],[56,6,15,25,"refreshToken"],[57,4,15,38],[57,5,15,39],[57,8,15,42],[57,12,15,42,"useSelector"],[57,23,15,53],[57,24,15,53,"useSelector"],[57,35,15,53],[57,37,15,54,"state"],[57,42,15,59],[57,46,15,63,"state"],[57,51,15,68],[57,52,15,69,"auth"],[57,56,15,73],[57,57,15,74],[58,4,16,4],[58,10,16,10],[58,11,16,11,"isSyncing"],[58,20,16,20],[58,22,16,22,"setIsSyncing"],[58,34,16,34],[58,35,16,35],[58,38,16,38],[58,42,16,38,"useState"],[58,48,16,46],[58,49,16,46,"useState"],[58,57,16,46],[58,59,16,47],[58,64,16,52],[58,65,16,53],[59,4,17,4],[59,10,17,10],[59,11,17,11,"isLoading"],[59,20,17,20],[59,22,17,22,"setIsLoading"],[59,34,17,34],[59,35,17,35],[59,38,17,38],[59,42,17,38,"useState"],[59,48,17,46],[59,49,17,46,"useState"],[59,57,17,46],[59,59,17,47],[59,64,17,52],[59,65,17,53],[60,4,18,4],[60,10,18,10],[60,11,18,11,"lastSync"],[60,19,18,19],[60,21,18,21,"setLastSync"],[60,32,18,32],[60,33,18,33],[60,36,18,36],[60,40,18,36,"useState"],[60,46,18,44],[60,47,18,44,"useState"],[60,55,18,44],[60,57,18,45],[60,61,18,49],[60,62,18,50],[61,4,19,4],[61,10,19,10],[61,11,19,11,"feedback"],[61,19,19,19],[61,21,19,21,"setFeedback"],[61,32,19,32],[61,33,19,33],[61,36,19,36],[61,40,19,36,"useState"],[61,46,19,44],[61,47,19,44,"useState"],[61,55,19,44],[61,57,19,45],[62,6,19,47,"visible"],[62,13,19,54],[62,15,19,56],[62,20,19,61],[63,6,19,63,"amount"],[63,12,19,69],[63,14,19,71],[64,4,19,73],[64,5,19,74],[64,6,19,75],[66,4,21,4],[67,4,22,4],[67,8,22,4,"useEffect"],[67,14,22,13],[67,15,22,13,"useEffect"],[67,24,22,13],[67,26,22,14],[67,32,22,20],[68,6,23,8],[68,10,23,12,"token"],[68,15,23,17],[68,17,23,19],[69,8,24,12,"syncBalance"],[69,19,24,23],[69,20,24,24],[69,21,24,25],[71,8,26,12],[72,8,27,12,"socket"],[72,20,27,18],[72,21,27,18,"socket"],[72,27,27,18],[72,28,27,19,"on"],[72,30,27,21],[72,31,27,22],[72,48,27,39],[72,50,27,41,"handleBalanceUpdate"],[72,69,27,60],[72,70,27,61],[73,6,28,8],[74,6,30,8],[74,12,30,14,"subscription"],[74,24,30,26],[74,27,30,29,"AppState"],[74,35,30,37],[74,36,30,37,"default"],[74,43,30,37],[74,44,30,38,"addEventListener"],[74,60,30,54],[74,61,30,55],[74,69,30,63],[74,71,30,65,"nextAppState"],[74,83,30,77],[74,87,30,81],[75,8,31,12],[75,12,31,16,"nextAppState"],[75,24,31,28],[75,29,31,33],[75,37,31,41],[75,41,31,45,"token"],[75,46,31,50],[75,48,31,52],[76,10,32,16,"syncBalance"],[76,21,32,27],[76,22,32,28],[76,23,32,29],[77,8,33,12],[78,6,34,8],[78,7,34,9],[78,8,34,10],[79,6,36,8],[79,13,36,15],[79,19,36,21],[80,8,37,12,"socket"],[80,20,37,18],[80,21,37,18,"socket"],[80,27,37,18],[80,28,37,19,"off"],[80,31,37,22],[80,32,37,23],[80,49,37,40],[80,51,37,42,"handleBalanceUpdate"],[80,70,37,61],[80,71,37,62],[81,8,38,12,"subscription"],[81,20,38,24],[81,21,38,25,"remove"],[81,27,38,31],[81,28,38,32],[81,29,38,33],[82,6,39,8],[82,7,39,9],[83,4,40,4],[83,5,40,5],[83,7,40,7],[83,8,40,8,"token"],[83,13,40,13],[83,14,40,14],[83,15,40,15],[85,4,42,4],[86,4,43,4],[87,4,44,4],[87,8,44,4,"useEffect"],[87,14,44,13],[87,15,44,13,"useEffect"],[87,24,44,13],[87,26,44,14],[87,32,44,20],[88,6,45,8],[88,10,45,12,"user"],[88,14,45,16],[88,18,45,20],[88,25,45,27,"user"],[88,29,45,31],[88,30,45,32,"coins"],[88,35,45,37],[88,40,45,42],[88,48,45,50],[88,50,45,52],[89,8,46,12],[89,14,46,18,"saveCoins"],[89,23,46,27],[89,26,46,30],[89,32,46,30,"saveCoins"],[89,33,46,30],[89,38,46,42],[90,10,47,16],[90,14,47,20],[91,12,48,20],[91,18,48,26,"AsyncStorage"],[91,30,48,38],[91,31,48,38,"default"],[91,38,48,38],[91,39,48,39,"setItem"],[91,46,48,46],[91,47,48,47],[91,59,48,59],[91,61,48,61,"user"],[91,65,48,65],[91,66,48,66,"coins"],[91,71,48,71],[91,72,48,72,"toString"],[91,80,48,80],[91,81,48,81],[91,82,48,82],[91,83,48,83],[92,10,49,16],[92,11,49,17],[92,12,49,18],[92,19,49,25,"error"],[92,24,49,30],[92,26,49,32],[93,12,50,20,"console"],[93,19,50,27],[93,20,50,28,"error"],[93,25,50,33],[93,26,50,34],[93,58,50,66],[93,60,50,68,"error"],[93,65,50,73],[93,66,50,74],[94,10,51,16],[95,8,52,12],[95,9,52,13],[96,8,53,12,"saveCoins"],[96,17,53,21],[96,18,53,22],[96,19,53,23],[97,6,54,8],[98,4,55,4],[98,5,55,5],[98,7,55,7],[98,8,55,8,"user"],[98,12,55,12],[98,14,55,14,"coins"],[98,19,55,19],[98,20,55,20],[98,21,55,21],[99,4,57,4],[99,10,57,10,"handleBalanceUpdate"],[99,29,57,29],[99,32,57,33,"data"],[99,36,57,37],[99,40,57,42],[100,6,58,8,"console"],[100,13,58,15],[100,14,58,16,"log"],[100,17,58,19],[100,18,58,20],[100,47,58,49],[100,49,58,51,"data"],[100,53,58,55],[100,54,58,56],[101,6,59,8],[101,10,59,12,"data"],[101,14,59,16],[101,18,59,20],[101,25,59,27,"data"],[101,29,59,31],[101,30,59,32,"coins"],[101,35,59,37],[101,40,59,42],[101,48,59,50],[101,50,59,52],[102,8,60,12,"dispatch"],[102,16,60,20],[102,17,60,21],[102,21,60,21,"updateUser"],[102,42,60,31],[102,43,60,31,"updateUser"],[102,53,60,31],[102,55,60,32],[103,10,60,34,"coins"],[103,15,60,39],[103,17,60,41,"data"],[103,21,60,45],[103,22,60,46,"coins"],[104,8,60,52],[104,9,60,53],[104,10,60,54],[104,11,60,55],[105,6,61,8],[106,4,62,4],[106,5,62,5],[107,4,64,4],[107,10,64,10,"syncBalance"],[107,21,64,21],[107,24,64,24],[107,30,64,24,"syncBalance"],[107,31,64,24],[107,36,64,36],[108,6,65,8],[108,10,65,12],[108,11,65,13,"token"],[108,16,65,18],[108,18,65,20],[109,6,66,8,"setIsLoading"],[109,18,66,20],[109,19,66,21],[109,23,66,25],[109,24,66,26],[110,6,67,8],[110,10,67,12],[111,8,68,12],[112,8,69,12],[113,8,70,12],[113,14,70,18,"syncTransactions"],[113,30,70,34],[113,31,70,35],[113,32,70,36],[115,8,72,12],[116,8,73,12],[117,8,74,12],[117,14,74,18,"balance"],[117,21,74,25],[117,24,74,28],[117,30,74,34,"CoinsService"],[117,42,74,46],[117,43,74,46,"default"],[117,50,74,46],[117,51,74,47,"reconcileBalance"],[117,67,74,63],[117,68,74,64,"user"],[117,72,74,68],[117,74,74,70,"id"],[117,76,74,72],[117,78,74,74,"token"],[117,83,74,79],[117,84,74,80],[118,8,75,12],[118,12,75,16,"balance"],[118,19,75,23],[118,24,75,28],[118,28,75,32],[118,32,75,36,"user"],[118,36,75,40],[118,40,75,44,"user"],[118,44,75,48],[118,45,75,49,"coins"],[118,50,75,54],[118,55,75,59,"balance"],[118,62,75,66],[118,64,75,68],[119,10,76,16,"dispatch"],[119,18,76,24],[119,19,76,25],[119,23,76,25,"updateUser"],[119,44,76,35],[119,45,76,35,"updateUser"],[119,55,76,35],[119,57,76,36],[120,12,76,38,"coins"],[120,17,76,43],[120,19,76,45,"balance"],[121,10,76,53],[121,11,76,54],[121,12,76,55],[121,13,76,56],[122,8,77,12],[123,8,79,12,"setLastSync"],[123,19,79,23],[123,20,79,24,"Date"],[123,24,79,28],[123,25,79,29,"now"],[123,28,79,32],[123,29,79,33],[123,30,79,34],[123,31,79,35],[124,6,80,8],[124,7,80,9],[124,8,80,10],[124,15,80,17,"error"],[124,20,80,22],[124,22,80,24],[125,8,81,12,"console"],[125,15,81,19],[125,16,81,20,"error"],[125,21,81,25],[125,22,81,26],[125,43,81,47],[125,45,81,49,"error"],[125,50,81,54],[125,51,81,55],[126,6,82,8],[126,7,82,9],[126,16,82,18],[127,8,83,12,"setIsLoading"],[127,20,83,24],[127,21,83,25],[127,26,83,30],[127,27,83,31],[128,6,84,8],[129,4,85,4],[129,5,85,5],[131,4,87,4],[132,4,88,4],[132,10,88,10,"refreshBalance"],[132,24,88,24],[132,27,88,27,"syncBalance"],[132,38,88,38],[133,4,90,4],[133,10,90,10,"syncTransactions"],[133,26,90,26],[133,29,90,29],[133,35,90,29,"syncTransactions"],[133,36,90,29],[133,41,90,41],[134,6,91,8],[134,10,91,12],[134,11,91,13,"token"],[134,16,91,18],[134,20,91,22,"isSyncing"],[134,29,91,31],[134,31,91,33],[135,6,92,8],[135,10,92,12],[136,8,93,12,"setIsSyncing"],[136,20,93,24],[136,21,93,25],[136,25,93,29],[136,26,93,30],[137,8,94,12],[137,14,94,18,"res"],[137,17,94,21],[137,20,94,24],[137,26,94,30,"CoinsService"],[137,38,94,42],[137,39,94,42,"default"],[137,46,94,42],[137,47,94,43,"synchroniser"],[137,59,94,55],[137,60,94,56,"token"],[137,65,94,61],[137,66,94,62],[138,8,95,12],[138,12,95,16,"res"],[138,15,95,19],[138,19,95,23,"res"],[138,22,95,26],[138,23,95,27,"ok"],[138,25,95,29],[138,30,95,34],[138,35,95,39],[138,39,95,43,"res"],[138,42,95,46],[138,43,95,47,"status"],[138,49,95,53],[138,54,95,58],[138,57,95,61],[138,61,95,65,"refreshToken"],[138,73,95,77],[138,75,95,79],[139,10,96,16],[139,14,96,20],[140,12,97,20],[140,18,97,26,"refreshResponse"],[140,33,97,41],[140,36,97,44],[140,42,97,50,"fetch"],[140,47,97,55],[140,48,97,56],[140,51,97,59,"API_URL"],[140,58,97,66],[140,59,97,66,"API_URL"],[140,66,97,66],[140,87,97,87],[140,89,97,89],[141,14,98,24,"method"],[141,20,98,30],[141,22,98,32],[141,28,98,38],[142,14,99,24,"headers"],[142,21,99,31],[142,23,99,33],[143,16,99,35],[143,30,99,49],[143,32,99,51],[144,14,99,70],[144,15,99,71],[145,14,100,24,"body"],[145,18,100,28],[145,20,100,30,"JSON"],[145,24,100,34],[145,25,100,35,"stringify"],[145,34,100,44],[145,35,100,45],[146,16,100,47,"refreshToken"],[147,14,100,60],[147,15,100,61],[148,12,101,20],[148,13,101,21],[148,14,101,22],[149,12,102,20],[149,16,102,24,"refreshResponse"],[149,31,102,39],[149,32,102,40,"ok"],[149,34,102,42],[149,36,102,44],[150,14,103,24],[150,20,103,30,"data"],[150,24,103,34],[150,27,103,37],[150,33,103,43,"refreshResponse"],[150,48,103,58],[150,49,103,59,"json"],[150,53,103,63],[150,54,103,64],[150,55,103,65],[151,14,104,24,"dispatch"],[151,22,104,32],[151,23,104,33],[151,27,104,33,"updateAccessToken"],[151,48,104,50],[151,49,104,50,"updateAccessToken"],[151,66,104,50],[151,68,104,51,"data"],[151,72,104,55],[151,73,104,56,"token"],[151,78,104,61],[151,79,104,62],[151,80,104,63],[152,14,105,24],[152,20,105,30,"CoinsService"],[152,32,105,42],[152,33,105,42,"default"],[152,40,105,42],[152,41,105,43,"synchroniser"],[152,53,105,55],[152,54,105,56,"data"],[152,58,105,60],[152,59,105,61,"token"],[152,64,105,66],[152,65,105,67],[153,12,106,20],[154,10,107,16],[154,11,107,17],[154,12,107,18],[154,19,107,25,"e"],[154,20,107,26],[154,22,107,28],[155,12,108,20,"console"],[155,19,108,27],[155,20,108,28,"error"],[155,25,108,33],[155,26,108,34],[155,49,108,57],[155,51,108,59,"e"],[155,52,108,60],[155,53,108,61],[156,10,109,16],[157,8,110,12],[158,6,111,8],[158,7,111,9],[158,8,111,10],[158,15,111,17,"error"],[158,20,111,22],[158,22,111,24],[159,8,112,12,"console"],[159,15,112,19],[159,16,112,20,"error"],[159,21,112,25],[159,22,112,26],[159,48,112,52],[159,50,112,54,"error"],[159,55,112,59],[159,56,112,60],[160,6,113,8],[160,7,113,9],[160,16,113,18],[161,8,114,12,"setIsSyncing"],[161,20,114,24],[161,21,114,25],[161,26,114,30],[161,27,114,31],[162,6,115,8],[163,4,116,4],[163,5,116,5],[164,4,118,4],[164,10,118,10,"debit"],[164,15,118,15],[164,18,118,18],[164,24,118,18,"debit"],[164,25,118,25,"amount"],[164,31,118,31],[164,33,118,33,"reason"],[164,39,118,39],[164,41,118,41,"metadata"],[164,49,118,49],[164,54,118,54],[165,6,119,8],[165,12,119,14,"currentBalance"],[165,26,119,28],[165,29,119,31,"user"],[165,33,119,35],[165,35,119,37,"coins"],[165,40,119,42],[165,44,119,46],[165,45,119,47],[166,6,120,8],[166,10,120,12],[167,8,121,12],[167,14,121,18,"result"],[167,20,121,24],[167,23,121,27],[167,29,121,33,"CoinsService"],[167,41,121,45],[167,42,121,45,"default"],[167,49,121,45],[167,50,121,46,"debiterCoins"],[167,62,121,58],[167,63,121,59,"currentBalance"],[167,77,121,73],[167,79,121,75,"amount"],[167,85,121,81],[167,87,121,83,"reason"],[167,93,121,89],[167,95,121,91,"metadata"],[167,103,121,99],[167,104,121,100],[168,8,122,12],[169,8,123,12,"dispatch"],[169,16,123,20],[169,17,123,21],[169,21,123,21,"updateUser"],[169,42,123,31],[169,43,123,31,"updateUser"],[169,53,123,31],[169,55,123,32],[170,10,123,34,"coins"],[170,15,123,39],[170,17,123,41,"result"],[170,23,123,47],[170,24,123,48,"nouveauSolde"],[171,8,123,61],[171,9,123,62],[171,10,123,63],[171,11,123,64],[173,8,125,12],[174,8,126,12,"setFeedback"],[174,19,126,23],[174,20,126,24],[175,10,126,26,"visible"],[175,17,126,33],[175,19,126,35],[175,23,126,39],[176,10,126,41,"amount"],[176,16,126,47],[176,18,126,49],[176,19,126,50,"amount"],[177,8,126,57],[177,9,126,58],[177,10,126,59],[179,8,128,12],[180,8,129,12],[181,8,130,12,"syncTransactions"],[181,24,130,28],[181,25,130,29],[181,26,130,30],[182,8,132,12],[182,15,132,19,"result"],[182,21,132,25],[183,6,133,8],[183,7,133,9],[183,8,133,10],[183,15,133,17,"error"],[183,20,133,22],[183,22,133,24],[184,8,134,12,"console"],[184,15,134,19],[184,16,134,20,"error"],[184,21,134,25],[184,22,134,26],[184,45,134,49],[184,47,134,51,"error"],[184,52,134,56],[184,53,134,57],[185,8,135,12],[185,14,135,18,"error"],[185,19,135,23],[186,6,136,8],[187,4,137,4],[187,5,137,5],[188,4,139,4],[188,10,139,10,"credit"],[188,16,139,16],[188,19,139,19],[188,25,139,19,"credit"],[188,26,139,26,"amount"],[188,32,139,32],[188,34,139,34,"reason"],[188,40,139,40],[188,42,139,42,"metadata"],[188,50,139,50],[188,55,139,55],[189,6,140,8],[189,12,140,14,"currentBalance"],[189,26,140,28],[189,29,140,31,"user"],[189,33,140,35],[189,35,140,37,"coins"],[189,40,140,42],[189,44,140,46],[189,45,140,47],[190,6,141,8],[190,10,141,12],[191,8,142,12],[191,14,142,18,"result"],[191,20,142,24],[191,23,142,27],[191,29,142,33,"CoinsService"],[191,41,142,45],[191,42,142,45,"default"],[191,49,142,45],[191,50,142,46,"crediterCoins"],[191,63,142,59],[191,64,142,60,"currentBalance"],[191,78,142,74],[191,80,142,76,"amount"],[191,86,142,82],[191,88,142,84,"reason"],[191,94,142,90],[191,96,142,92,"metadata"],[191,104,142,100],[191,105,142,101],[192,8,143,12,"dispatch"],[192,16,143,20],[192,17,143,21],[192,21,143,21,"updateUser"],[192,42,143,31],[192,43,143,31,"updateUser"],[192,53,143,31],[192,55,143,32],[193,10,143,34,"coins"],[193,15,143,39],[193,17,143,41,"result"],[193,23,143,47],[193,24,143,48,"nouveauSolde"],[194,8,143,61],[194,9,143,62],[194,10,143,63],[194,11,143,64],[196,8,145,12],[197,8,146,12,"setFeedback"],[197,19,146,23],[197,20,146,24],[198,10,146,26,"visible"],[198,17,146,33],[198,19,146,35],[198,23,146,39],[199,10,146,41,"amount"],[199,16,146,47],[199,18,146,49,"amount"],[199,24,146,55],[200,10,146,57,"type"],[200,14,146,61],[200,16,146,63],[201,8,146,72],[201,9,146,73],[201,10,146,74],[202,8,148,12,"syncTransactions"],[202,24,148,28],[202,25,148,29],[202,26,148,30],[203,8,149,12],[203,15,149,19,"result"],[203,21,149,25],[204,6,150,8],[204,7,150,9],[204,8,150,10],[204,15,150,17,"error"],[204,20,150,22],[204,22,150,24],[205,8,151,12,"console"],[205,15,151,19],[205,16,151,20,"error"],[205,21,151,25],[205,22,151,26],[205,46,151,50],[205,48,151,52,"error"],[205,53,151,57],[205,54,151,58],[206,8,152,12],[206,14,152,18,"error"],[206,19,152,23],[207,6,153,8],[208,4,154,4],[208,5,154,5],[209,4,156,4],[209,10,156,10,"refund"],[209,16,156,16],[209,19,156,19],[209,25,156,19,"refund"],[209,26,156,26,"amount"],[209,32,156,32],[209,34,156,34,"reason"],[209,40,156,40],[209,42,156,42,"metadata"],[209,50,156,50],[209,55,156,55],[210,6,157,8],[210,12,157,14,"currentBalance"],[210,26,157,28],[210,29,157,31,"user"],[210,33,157,35],[210,35,157,37,"coins"],[210,40,157,42],[210,44,157,46],[210,45,157,47],[211,6,158,8],[211,10,158,12],[212,8,159,12],[212,14,159,18,"result"],[212,20,159,24],[212,23,159,27],[212,29,159,33,"CoinsService"],[212,41,159,45],[212,42,159,45,"default"],[212,49,159,45],[212,50,159,46,"rembourserTransaction"],[212,71,159,67],[212,72,159,68,"currentBalance"],[212,86,159,82],[212,88,159,84,"amount"],[212,94,159,90],[212,96,159,92,"reason"],[212,102,159,98],[212,104,159,100,"metadata"],[212,112,159,108],[212,113,159,109],[213,8,160,12,"dispatch"],[213,16,160,20],[213,17,160,21],[213,21,160,21,"updateUser"],[213,42,160,31],[213,43,160,31,"updateUser"],[213,53,160,31],[213,55,160,32],[214,10,160,34,"coins"],[214,15,160,39],[214,17,160,41,"result"],[214,23,160,47],[214,24,160,48,"nouveauSolde"],[215,8,160,61],[215,9,160,62],[215,10,160,63],[215,11,160,64],[217,8,162,12],[218,8,163,12,"setFeedback"],[218,19,163,23],[218,20,163,24],[219,10,163,26,"visible"],[219,17,163,33],[219,19,163,35],[219,23,163,39],[220,10,163,41,"amount"],[220,16,163,47],[220,18,163,49,"amount"],[220,24,163,55],[221,10,163,57,"type"],[221,14,163,61],[221,16,163,63],[222,8,163,79],[222,9,163,80],[222,10,163,81],[223,8,165,12,"syncTransactions"],[223,24,165,28],[223,25,165,29],[223,26,165,30],[224,8,166,12],[224,15,166,19,"result"],[224,21,166,25],[225,6,167,8],[225,7,167,9],[225,8,167,10],[225,15,167,17,"error"],[225,20,167,22],[225,22,167,24],[226,8,168,12,"console"],[226,15,168,19],[226,16,168,20,"error"],[226,21,168,25],[226,22,168,26],[226,46,168,50],[226,48,168,52,"error"],[226,53,168,57],[226,54,168,58],[227,8,169,12],[227,14,169,18,"error"],[227,19,169,23],[228,6,170,8],[229,4,171,4],[229,5,171,5],[230,4,173,4],[230,10,173,10,"value"],[230,15,173,15],[230,18,173,18],[231,6,174,8,"refreshBalance"],[231,20,174,22],[232,6,175,8,"syncBalance"],[232,17,175,19],[233,6,175,21],[234,6,176,8,"debit"],[234,11,176,13],[235,6,177,8,"credit"],[235,12,177,14],[236,6,178,8,"refund"],[236,12,178,14],[237,6,179,8,"isSyncing"],[237,15,179,17],[238,6,180,8,"isLoading"],[238,15,180,17],[239,6,181,8,"lastSync"],[239,14,181,16],[240,6,182,8,"feedback"],[240,14,182,16],[241,6,183,8,"setFeedback"],[241,17,183,19],[241,18,183,20],[242,4,184,4],[242,5,184,5],[243,4,186,4],[243,24,187,8],[243,28,187,8,"_reactJsxDevRuntime"],[243,47,187,8],[243,48,187,8,"jsxDEV"],[243,54,187,8],[243,56,187,9,"CoinsContext"],[243,68,187,21],[243,69,187,22,"Provider"],[243,77,187,30],[244,6,187,31,"value"],[244,11,187,36],[244,13,187,38,"value"],[244,18,187,44],[245,6,187,44,"children"],[245,14,187,44],[245,17,188,13,"children"],[245,25,188,21],[245,40,189,12],[245,44,189,12,"_reactJsxDevRuntime"],[245,63,189,12],[245,64,189,12,"jsxDEV"],[245,70,189,12],[245,72,189,13,"CoinsFeedback"],[245,85,189,26],[245,86,189,26,"default"],[245,93,189,26],[246,8,190,16,"visible"],[246,15,190,23],[246,17,190,25,"feedback"],[246,25,190,33],[246,26,190,34,"visible"],[246,33,190,42],[247,8,191,16,"amount"],[247,14,191,22],[247,16,191,24,"feedback"],[247,24,191,32],[247,25,191,33,"amount"],[247,31,191,40],[248,8,192,16,"type"],[248,12,192,20],[248,14,192,22,"feedback"],[248,22,192,30],[248,23,192,31,"type"],[248,27,192,36],[249,8,193,16,"onFinish"],[249,16,193,24],[249,18,193,26,"onFinish"],[249,19,193,26],[249,24,193,32,"setFeedback"],[249,35,193,43],[249,36,193,44,"prev"],[249,40,193,48],[249,45,193,53],[250,10,193,55],[250,13,193,58,"prev"],[250,17,193,62],[251,10,193,64,"visible"],[251,17,193,71],[251,19,193,73],[252,8,193,79],[252,9,193,80],[252,10,193,81],[253,6,193,83],[254,8,193,83,"fileName"],[254,16,193,83],[254,18,193,83,"_jsxFileName"],[254,30,193,83],[255,8,193,83,"lineNumber"],[255,18,193,83],[256,8,193,83,"columnNumber"],[256,20,193,83],[257,6,193,83],[257,13,194,13],[257,14,194,14],[258,4,194,14],[259,6,194,14,"fileName"],[259,14,194,14],[259,16,194,14,"_jsxFileName"],[259,28,194,14],[260,6,194,14,"lineNumber"],[260,16,194,14],[261,6,194,14,"columnNumber"],[261,18,194,14],[262,4,194,14],[262,11,195,31],[262,12,195,32],[263,2,197,0],[263,3,197,1],[264,2,197,2,"_s"],[264,4,197,2],[264,5,13,13,"CoinsProvider"],[264,18,13,26],[265,4,13,26],[265,12,14,21,"useDispatch"],[265,23,14,32],[265,24,14,32,"useDispatch"],[265,35,14,32],[265,37,15,42,"useSelector"],[265,48,15,53],[265,49,15,53,"useSelector"],[265,60,15,53],[266,2,15,53],[267,2,15,53,"_c"],[267,4,15,53],[267,7,13,13,"CoinsProvider"],[267,20,13,26],[268,2,199,7],[268,8,199,13,"useCoinsContext"],[268,23,199,28],[268,26,199,31,"useCoinsContext"],[268,27,199,31],[268,32,199,37],[269,4,199,37,"_s2"],[269,7,199,37],[270,4,200,4],[270,10,200,10,"context"],[270,17,200,17],[270,20,200,20],[270,24,200,20,"useContext"],[270,30,200,30],[270,31,200,30,"useContext"],[270,41,200,30],[270,43,200,31,"CoinsContext"],[270,55,200,43],[270,56,200,44],[271,4,201,4],[271,8,201,8],[271,9,201,9,"context"],[271,16,201,16],[271,18,201,18],[272,6,202,8],[272,12,202,14],[272,16,202,18,"Error"],[272,21,202,23],[272,22,202,24],[272,75,202,77],[272,76,202,78],[273,4,203,4],[274,4,204,4],[274,11,204,11,"context"],[274,18,204,18],[275,2,205,0],[275,3,205,1],[276,2,205,2,"_s2"],[276,5,205,2],[276,6,199,13,"useCoinsContext"],[276,21,199,28],[277,2,207,0],[277,6,207,0,"_default"],[277,14,207,0],[277,17,207,15,"CoinsContext"],[277,29,207,27],[278,2,207,28],[278,6,207,28,"_c"],[278,8,207,28],[279,2,207,28,"$RefreshReg$"],[279,14,207,28],[279,15,207,28,"_c"],[279,17,207,28],[280,0,207,28],[280,3]],"functionMap":{"names":["<global>","CoinsProvider","useSelector$argument_0","useEffect$argument_0","AppState.addEventListener$argument_1","<anonymous>","saveCoins","handleBalanceUpdate","syncBalance","syncTransactions","debit","credit","refund","CoinsFeedback.props.onFinish","setFeedback$argument_0","useCoinsContext"],"mappings":"AAA;6BCY;sDCE,mBD;cEO;iECQ;SDI;eEE;SFG;KFC;cEI;8BGE;aHM;KFG;gCME;KNK;wBOE;KPqB;6BQK;KR0B;kBSE;KTmB;mBUE;KVe;mBWE;KXe;0BYsB,kBC,qCD,CZ;CDI;+BeE;CfM"},"hasCjsExports":false},"type":"js/module"}]}